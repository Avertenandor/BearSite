<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>PLEX Marathon Demo - Best Trade Style</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <meta name="description" content="PLEX Marathon Demo в стиле Best Trade – современная децентрализованная платформа с потоками, бонусами и ускоренным режимом.">
  <meta name="keywords" content="PLEX Marathon, Best Trade, DEX, DeFi, PLEX, децентрализованная биржа">
  <meta name="author" content="PLEX Marathon Team">
  <meta name="theme-color" content="#0A0E17">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="icon" href="/favicon.ico" sizes="any">
  
  <!-- Подключение шрифтов и Remix Icon -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css">

  <!-- Глобальные переменные и базовые стили -->
  <style>
    :root {
      --bg-primary: #0A0E17;
      --bg-secondary: #141A24;
      --bg-tertiary: #1C2331;
      --bg-card: rgba(28, 35, 49, 0.8);
      --accent-turquoise: #00E2C3;
      --accent-magenta: #FF3B9A;
      --accent-blue: #2D7FF9;
      --accent-purple: #9C5FFF;
      --accent-green: #4CD964;
      --accent-red: #FF3B30;
      --accent-yellow: #FFCC00;
      --text-primary: #F2F5F9;
      --text-secondary: #A1A7B3;
      --text-tertiary: #5A6577;
      --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);
      --border-radius-lg: 16px;
      --spacing-sm: 8px;
      --spacing-md: 16px;
      --spacing-lg: 24px;
      --spacing-xl: 32px;
      --transition-normal: 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      height: 100%;
      font-family: 'Inter', sans-serif;
      font-size: 16px;
      line-height: 1.5;
      color: var(--text-primary);
      background-color: var(--bg-primary);
      overflow-x: hidden;
      scroll-behavior: smooth;
    }
    body {
      background: linear-gradient(135deg, #1c1c1e, #3a3a40, #1c1c1e);
      background-size: cover;
    }
    a { color: var(--accent-blue); text-decoration: none; transition: color 0.3s ease; }
    a:hover { color: var(--accent-turquoise); }
    @media (max-width: 768px) {
      #login-screen, #cabinet { margin: var(--spacing-md); padding: var(--spacing-md); }
      #login-screen h1 { font-size: 1.8rem; margin-bottom: var(--spacing-md); }
      #login-screen input, #login-screen button { max-width: 90%; font-size: 1rem; padding: var(--spacing-sm) var(--spacing-md); }
    }
  </style>

  <!-- Стили для раздела авторизации, кабинета, карусели подарков и тестового уровня -->
  <style>
    /* Анимации */
    .fade-in { animation: fadeIn 0.5s ease forwards; }
    .fade-out { animation: fadeOut 0.5s ease forwards; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }

    /* Glassmorphism */
    #login-screen, #cabinet, .gift-carousel {
      background: var(--bg-card);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: var(--border-radius-lg);
      box-shadow: var(--card-shadow);
      backdrop-filter: blur(10px);
      margin: var(--spacing-lg);
      padding: var(--spacing-xl);
    }
    /* Авторизация */
    #login-screen h1 { font-size: 2.5rem; margin-bottom: var(--spacing-lg); }
    #login-screen input {
      width: 100%; max-width: 400px;
      padding: var(--spacing-sm) var(--spacing-md);
      font-size: 1.1rem;
      border: 1px solid rgba(255,255,255,0.3);
      border-radius: var(--border-radius-lg);
      background: rgba(255,255,255,0.05);
      color: var(--text-primary);
      margin-bottom: var(--spacing-sm);
    }
    #login-screen button {
      width: 100%; max-width: 400px;
      padding: var(--spacing-sm) var(--spacing-md);
      font-size: 1.1rem;
      border: 1px solid rgba(255,255,255,0.3);
      border-radius: var(--border-radius-lg);
      background: linear-gradient(45deg, var(--accent-blue), var(--accent-turquoise));
      color: var(--text-primary);
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
      margin-bottom: var(--spacing-sm);
    }
    #login-screen button:hover { background: linear-gradient(45deg, var(--accent-turquoise), var(--accent-blue)); transform: scale(1.03); }
    .error { text-align: center; color: var(--accent-red); margin-top: var(--spacing-sm); }
    /* Кабинет */
    #cabinet .header {
      display: flex; justify-content: space-between; align-items: center;
      border-bottom: 1px solid rgba(255,255,255,0.1); margin-bottom: var(--spacing-md);
      flex-wrap: wrap; gap: var(--spacing-sm);
    }
    #cabinet .header h2 { margin-right: auto; font-size: 1.6rem; }
    /* Карусель подарков */
    .gift-carousel { text-align: center; }
    .gift-carousel h3 { margin-bottom: var(--spacing-sm); }
    .gift-carousel p { margin-bottom: var(--spacing-sm); }
    .gift-carousel button {
      width: 100%; max-width: 400px;
      padding: var(--spacing-sm) var(--spacing-md);
      font-size: 1.1rem;
      border: 1px solid rgba(255,255,255,0.3);
      border-radius: var(--border-radius-lg);
      background: linear-gradient(45deg, var(--accent-blue), var(--accent-turquoise));
      color: var(--text-primary);
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
      margin-bottom: var(--spacing-sm);
    }
    .gift-carousel button:hover { background: linear-gradient(45deg, var(--accent-turquoise), var(--accent-blue)); transform: scale(1.03); }
    #giftCarouselContainer { display: none; margin-top: var(--spacing-md); }
    #giftCarousel { font-size: 1.5rem; text-align: center; padding: var(--spacing-md); }
    #giftResult { margin-top: var(--spacing-md); font-size: 1.2rem; }
    /* Потоки – все карточки (кроме тестового уровня) закрашены серым */
    .streams-container .stream-card { background: #4a4a4a; }
    .stream-card:hover { transform: translateY(-5px); }
    .progress-bar-container {
      background: rgba(255,255,255,0.1);
      border-radius: 8px;
      overflow: hidden;
      height: 10px;
      margin: var(--spacing-sm) 0;
    }
    .progress-bar {
      height: 10px;
      background: linear-gradient(45deg, var(--accent-green), var(--accent-blue));
      width: 0%;
      transition: width 0.5s ease-in-out;
    }
    /* Тестовый уровень (мониторинг транзакций BNB) – оставляем без серого фона */
    #test-level-section {
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: var(--border-radius-lg);
      padding: var(--spacing-md);
      transition: transform 0.3s;
    }
    #test-level-section:hover { transform: translateY(-3px); }
    #test-level-header {
      display: flex; align-items: center; justify-content: space-between;
      margin-bottom: var(--spacing-md); flex-wrap: wrap; gap: var(--spacing-sm);
    }
    #test-level-title { font-size: 1.2rem; font-weight: 600; }
    #testLevelProgressContainer {
      margin-top: var(--spacing-md);
      background: rgba(255,255,255,0.1);
      border-radius: 8px;
      height: 12px;
      overflow: hidden;
      position: relative;
    }
    #testLevelProgressBar {
      position: absolute; left: 0; top: 0; bottom: 0;
      width: 0%;
      background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple));
      transition: width 0.5s ease;
    }
    #testLevelTxList {
      margin-top: var(--spacing-md);
      max-height: 200px;
      overflow-y: auto;
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: var(--border-radius-lg);
      padding: var(--spacing-sm);
    }
    .tx-item {
      font-size: 0.9rem;
      border-bottom: 1px solid rgba(255,255,255,0.05);
      margin-bottom: var(--spacing-sm);
      padding-bottom: var(--spacing-sm);
    }
    .tx-item:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
    #testLevelStatus { margin-top: var(--spacing-sm); font-size: 0.85rem; color: var(--text-secondary); }
  </style>

  <!-- Стили для Header, Hero, Footer -->
  <style>
    .container { width: 100%; max-width: 1200px; margin: 0 auto; padding: 0 var(--spacing-lg); }
    header {
      padding: var(--spacing-lg) 0;
      display: flex; align-items: center; justify-content: space-between;
      position: relative; z-index: 100;
    }
    .logo-container { display: flex; align-items: center; gap: var(--spacing-md); }
    .logo { position: relative; width: 60px; height: 60px; }
    .logo-svg {
      width: 100%; height: 100%;
      filter: drop-shadow(0 0 8px rgba(0,226,195,0.4));
      animation: logoRotate 12s linear infinite;
    }
    @keyframes logoRotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    .logo-pulse {
      position: absolute; top: 0; left: 0;
      width: 100%; height: 100%;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(45,127,249,0.3) 0%, rgba(0,226,195,0.1) 40%, transparent 70%);
      opacity: 0.6;
      animation: logoPulse 4s ease-in-out infinite;
    }
    @keyframes logoPulse { 0%, 100% { transform: scale(0.9); opacity: 0.5; } 50% { transform: scale(1.2); opacity: 0.8; } }
    .brand-name {
      font-size: 1.8rem; font-weight: 700;
      background: linear-gradient(90deg, var(--accent-blue), var(--accent-turquoise));
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }
    .hero-section {
      padding: var(--spacing-xl) 0; min-height: 70vh;
      display: flex; align-items: center;
      background: url('https://besttrade.io/img/hero-bg.jpg') no-repeat center center/cover;
    }
    .hero-content {
      display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-xl); align-items: center;
    }
    .hero-text { color: var(--text-primary); }
    .hero-title {
      font-size: 3rem; font-weight: 700; line-height: 1.2;
      margin-bottom: var(--spacing-lg);
      background: linear-gradient(90deg, var(--text-primary), var(--accent-blue));
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }
    .hero-description { font-size: 1.1rem; color: var(--text-secondary); margin-bottom: var(--spacing-lg); }
    .hero-image img { width: 100%; border-radius: var(--border-radius-lg); }
    footer {
      background: linear-gradient(180deg, var(--bg-secondary), #0c121f);
      color: var(--text-secondary);
      padding: var(--spacing-xl) 0 var(--spacing-lg);
      border-top: 1px solid rgba(255,255,255,0.05);
      margin-top: calc(var(--spacing-xl) * 2);
      text-align: center; font-size: 0.9rem;
    }
  </style>

  <!-- Стили для кастомного курсора -->
  <style>
    body { cursor: none !important; }
    .cursor-dot, .cursor-ring {
      position: fixed; top: 0; left: 0;
      pointer-events: none; z-index: 10000;
      transition: all 0.2s;
    }
    .cursor-dot {
      width: 8px; height: 8px;
      background: var(--accent-turquoise);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      box-shadow: 0 0 10px rgba(0,226,195,0.8);
    }
    .cursor-ring {
      width: 32px; height: 32px;
      border: 2px solid rgba(45,127,249,0.5);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      opacity: 0.8;
    }
    @media (pointer: coarse) { .cursor-dot, .cursor-ring { display: none; } }
    .cursor-active { transform: scale(1.5) translate(-50%, -50%); background: var(--accent-magenta); }
    .cursor-ring-active { border-color: rgba(255,59,154,0.5); transform: scale(1.2) translate(-50%, -50%); }
    .cursor-hover { background: var(--accent-purple) !important; box-shadow: 0 0 10px var(--accent-purple); }
    .cursor-ring-hover { border-color: rgba(156,95,255,0.5); }
  </style>
</head>
<body>
  <!-- Кастомный курсор -->
  <div class="cursor-dot"></div>
  <div class="cursor-ring"></div>

<!-- HEADER -->
<header>
    <div class="container">
        <div class="logo-container">
            <div class="logo">
                <!-- Enhanced SVG Logo with more complex elements -->
                <svg class="logo-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#2D7FF9" />
                            <stop offset="100%" stop-color="#00E2C3" />
                        </linearGradient>
                        <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
                            <feGaussianBlur stdDeviation="3" result="blur" />
                            <feComposite in="SourceGraphic" in2="blur" operator="over" />
                        </filter>
                    </defs>
                    <!-- Outer rotating circle -->
                    <circle cx="50" cy="50" r="45" fill="none" stroke="url(#logoGradient)" stroke-width="6" stroke-dasharray="10 4" class="rotate-element"/>
                    <!-- Middle pulsing hexagon -->
                    <path d="M30 35L50 25L70 35L70 65L50 75L30 65Z" fill="none" stroke="url(#logoGradient)" stroke-width="4" class="pulse-element" filter="url(#glow)"/>
                    <!-- Inner spinning particles -->
                    <circle cx="50" cy="35" r="3" fill="url(#logoGradient)" class="particle particle-1" filter="url(#glow)"/>
                    <circle cx="65" cy="50" r="2" fill="url(#logoGradient)" class="particle particle-2" filter="url(#glow)"/>
                    <circle cx="50" cy="65" r="3" fill="url(#logoGradient)" class="particle particle-3" filter="url(#glow)"/>
                    <circle cx="35" cy="50" r="2" fill="url(#logoGradient)" class="particle particle-4" filter="url(#glow)"/>
                    <!-- PLEX text with enhanced glow -->
                    <text x="32" y="62" font-family="Arial" font-weight="bold" font-size="28" fill="url(#logoGradient)" filter="url(#glow)" class="text-element">PLEX</text>
                </svg>
                <div class="logo-pulse"></div>
            </div>
            <div class="brand-name">Marathon</div>
        </div>
    </div>
</header>

<!-- Стильная бегущая строка -->
<div class="ticker-wrapper">
    <div class="ticker-container">
        <div class="ticker-background-glow"></div>
        <div class="ticker-border-top"></div>
        <div class="ticker-content">
            <div class="ticker-text">
                <span>Делай деньги для себя прямо сейчас в режиме реального времени</span>
                <span>Твоя сила в стабильности.</span>
                <span>Делай деньги для себя прямо сейчас в режиме реального времени</span>
                <span>Твоя сила в стабильности.</span>
            </div>
        </div>
        <div class="ticker-border-bottom"></div>
    </div>
</div>

<style>
    /* Улучшенные стили для логотипа */
    .logo {
        position: relative;
        width: 70px;
        height: 70px;
        margin-right: 5px;
    }
    
    .logo-svg {
        width: 100%;
        height: 100%;
        filter: drop-shadow(0 0 8px rgba(0,226,195,0.4));
    }
    
    /* Новые анимации для логотипа */
    .rotate-element {
        animation: logoRotate 12s linear infinite;
        transform-origin: center;
    }
    
    .pulse-element {
        animation: logoPulse 3s ease-in-out infinite alternate;
        transform-origin: center;
    }
    
    .text-element {
        animation: textGlow 2s ease-in-out infinite alternate;
    }
    
    .particle {
        animation-duration: 6s;
        animation-iteration-count: infinite;
        animation-timing-function: linear;
        transform-origin: center;
    }
    
    .particle-1 {
        animation-name: particleOrbit1;
    }
    
    .particle-2 {
        animation-name: particleOrbit2;
        animation-delay: -1.5s;
    }
    
    .particle-3 {
        animation-name: particleOrbit1;
        animation-delay: -3s;
    }
    
    .particle-4 {
        animation-name: particleOrbit2;
        animation-delay: -4.5s;
    }
    
    @keyframes logoRotate {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }
    
    @keyframes logoPulse {
        0% { transform: scale(0.95); opacity: 0.8; }
        100% { transform: scale(1.05); opacity: 1; }
    }
    
    @keyframes textGlow {
        0% { filter: drop-shadow(0 0 2px rgba(0,226,195,0.4)); }
        100% { filter: drop-shadow(0 0 8px rgba(45,127,249,0.8)); }
    }
    
    @keyframes particleOrbit1 {
        0% { transform: rotate(0deg) translateX(18px) rotate(0deg); }
        100% { transform: rotate(360deg) translateX(18px) rotate(-360deg); }
    }
    
    @keyframes particleOrbit2 {
        0% { transform: rotate(0deg) translateX(18px) rotate(0deg); }
        100% { transform: rotate(-360deg) translateX(18px) rotate(360deg); }
    }
    
    /* Стили для бегущей строки */
    .ticker-wrapper {
        width: 100%;
        margin: 0.5rem 0 1.5rem;
        background: linear-gradient(90deg, var(--bg-primary), #141a24, var(--bg-primary));
        padding: 0.5rem 0;
        position: relative;
        overflow: hidden;
    }
    
    .ticker-container {
        position: relative;
        height: 40px;
        overflow: hidden;
    }
    
    .ticker-background-glow {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(90deg, 
            rgba(0,226,195,0.05) 0%, 
            rgba(45,127,249,0.1) 50%,
            rgba(0,226,195,0.05) 100%);
        filter: blur(10px);
        z-index: 1;
    }
    
    .ticker-border-top, .ticker-border-bottom {
        position: absolute;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, 
            transparent 0%, 
            rgba(0,226,195,0.5) 20%, 
            rgba(45,127,249,0.5) 50%,
            rgba(0,226,195,0.5) 80%,
            transparent 100%);
        z-index: 3;
    }
    
    .ticker-border-top {
        top: 0;
        animation: borderGlow 3s infinite alternate;
    }
    
    .ticker-border-bottom {
        bottom: 0;
        animation: borderGlow 3s infinite alternate-reverse;
    }
    
    .ticker-content {
        position: relative;
        z-index: 2;
        height: 100%;
        display: flex;
        align-items: center;
        overflow: hidden;
    }
    
    .ticker-text {
        display: flex;
        white-space: nowrap;
        animation: tickerScroll 20s linear infinite;
    }
    
    .ticker-text span {
        display: inline-block;
        padding-right: 50px;
        font-family: 'Inter', sans-serif;
        font-weight: 500;
        font-size: 1rem;
        background: linear-gradient(90deg, var(--text-primary) 0%, var(--accent-blue) 50%, var(--accent-turquoise) 100%);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        text-shadow: 0 0 10px rgba(0, 226, 195, 0.3);
        letter-spacing: 0.5px;
    }
    
    @keyframes borderGlow {
        0% { opacity: 0.5; }
        100% { opacity: 1; }
    }
    
    @keyframes tickerScroll {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); }
    }
</style>

<!-- HERO SECTION -->
<section class="hero-section">
    <!-- Animated background elements -->
    <div class="hero-bg-elements">
        <div class="hero-particle hero-particle-1"></div>
        <div class="hero-particle hero-particle-2"></div>
        <div class="hero-particle hero-particle-3"></div>
        <div class="hero-glow"></div>
    </div>
    
    <div class="container">
        <div class="hero-content">
            <div class="hero-text" data-aos="fade-right">
                <h1 class="hero-title">
                    Ускорь свой <span class="gradient-text">PLEX</span>
                    <br><span class="highlight-text">с Marathon</span>
                </h1>
                
                <p class="hero-description">
                    Инновационный марафон с потоками, бонусами и ускоренным режимом.
                    <span class="accent-text">Увеличивай свои активы уже сегодня.</span>
                </p>
                
                <div class="hero-features">
                    <div class="hero-feature">
                        <i class="ri-rocket-2-fill"></i> Быстрые результаты
                    </div>
                    <div class="hero-feature">
                        <i class="ri-shield-check-fill"></i> Надёжная система
                    </div>
                    <div class="hero-feature">
                        <i class="ri-line-chart-fill"></i> Стабильный рост
                    </div>
                </div>
                
                <a href="#plex-marathon" class="action-button pulse-button">
                    <span class="button-icon"><i class="ri-flashlight-fill"></i></span>
                    <span class="button-text">Начать марафон</span>
                    <span class="button-arrow"><i class="ri-arrow-right-line"></i></span>
                </a>
            </div>
            
            <div class="hero-visual" data-aos="fade-left">
                <div class="hero-image-container">
                    <div class="image-glow"></div>
                    <div class="hero-3d-object">
                        <!-- 3D Object with CSS -->
                        <div class="cube-container">
                            <div class="cube">
                                <div class="cube-face front">P</div>
                                <div class="cube-face back">L</div>
                                <div class="cube-face right">E</div>
                                <div class="cube-face left">X</div>
                                <div class="cube-face top">M</div>
                                <div class="cube-face bottom">+</div>
                            </div>
                        </div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-icon"><i class="ri-funds-box-fill"></i></div>
                        <div class="stats-content">
                            <div class="stats-title">Рост активов</div>
                            <div class="stats-value">+297%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Hero section styles -->
<style>
    .hero-section {
        position: relative;
        padding: calc(var(--spacing-xl) * 1.5) 0;
        min-height: 85vh;
        display: flex;
        align-items: center;
        overflow: hidden;
        background: linear-gradient(135deg, rgba(10, 14, 23, 0.9) 0%, rgba(20, 26, 36, 0.95) 100%);
    }
    
    /* Animated background elements */
    .hero-bg-elements {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
        overflow: hidden;
    }
    
    .hero-particle {
        position: absolute;
        border-radius: 50%;
        opacity: 0.5;
        filter: blur(8px);
    }
    
    .hero-particle-1 {
        top: 15%;
        left: 10%;
        width: 150px;
        height: 150px;
        background: radial-gradient(circle, rgba(0, 226, 195, 0.2) 0%, transparent 70%);
        animation: float 15s infinite alternate ease-in-out;
    }
    
    .hero-particle-2 {
        bottom: 20%;
        right: 15%;
        width: 200px;
        height: 200px;
        background: radial-gradient(circle, rgba(45, 127, 249, 0.15) 0%, transparent 70%);
        animation: float 18s infinite alternate-reverse ease-in-out;
    }
    
    .hero-particle-3 {
        top: 60%;
        left: 25%;
        width: 120px;
        height: 120px;
        background: radial-gradient(circle, rgba(156, 95, 255, 0.15) 0%, transparent 70%);
        animation: float 12s infinite alternate ease-in-out;
    }
    
    .hero-glow {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at 50% 50%, rgba(45, 127, 249, 0.03) 0%, transparent 70%);
    }
    
    @keyframes float {
        0% { transform: translate(0, 0) scale(1); }
        50% { transform: translate(15px, -15px) scale(1.05); }
        100% { transform: translate(-15px, 15px) scale(0.95); }
    }
    
    .container {
        position: relative;
        z-index: 2;
    }
    
    .hero-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: calc(var(--spacing-xl) * 1.5);
        align-items: center;
    }
    
    /* Text styling */
    .hero-title {
        font-size: 3.5rem;
        font-weight: 700;
        line-height: 1.2;
        margin-bottom: var(--spacing-lg);
        letter-spacing: -0.02em;
    }
    
    .gradient-text {
        background: linear-gradient(90deg, var(--accent-blue) 0%, var(--accent-turquoise) 100%);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        font-weight: 800;
        letter-spacing: 1px;
        text-shadow: 0 0 20px rgba(0, 226, 195, 0.4);
    }
    
    .highlight-text {
        position: relative;
        color: var(--text-primary);
        display: inline-block;
        animation: pulse 3s infinite;
    }
    
    .highlight-text::after {
        content: "";
        position: absolute;
        bottom: 5px;
        left: 0;
        width: 100%;
        height: 6px;
        background: linear-gradient(90deg, var(--accent-purple) 0%, transparent 100%);
        border-radius: 3px;
        z-index: -1;
    }
    
    .hero-description {
        font-size: 1.2rem;
        color: var(--text-secondary);
        margin-bottom: var(--spacing-xl);
        max-width: 90%;
        line-height: 1.6;
    }
    
    .accent-text {
        color: var(--accent-turquoise);
        font-weight: 500;
        display: inline-block;
        margin-top: 8px;
    }
    
    /* Features list */
    .hero-features {
        display: flex;
        flex-wrap: wrap;
        gap: var(--spacing-md);
        margin-bottom: var(--spacing-xl);
    }
    
    .hero-feature {
        display: flex;
        align-items: center;
        gap: 8px;
        background: rgba(45, 127, 249, 0.1);
        border: 1px solid rgba(45, 127, 249, 0.2);
        padding: 8px 16px;
        border-radius: 30px;
        font-size: 0.9rem;
        color: var(--text-primary);
        transition: all 0.3s ease;
    }
    
    .hero-feature:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(45, 127, 249, 0.2);
        background: rgba(45, 127, 249, 0.15);
    }
    
    .hero-feature i {
        color: var(--accent-blue);
        font-size: 1.1rem;
    }
    
    /* CTA Button */
    .action-button {
        display: inline-flex;
        align-items: center;
        gap: 12px;
        background: linear-gradient(90deg, var(--accent-turquoise) 0%, var(--accent-blue) 100%);
        color: #fff;
        font-weight: 600;
        padding: 16px 28px;
        border-radius: 40px;
        font-size: 1.1rem;
        text-decoration: none;
        transition: all 0.3s ease;
        box-shadow: 0 8px 20px rgba(0, 226, 195, 0.3);
        position: relative;
        overflow: hidden;
    }
    
    .action-button::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.2) 50%, transparent 100%);
        transition: all 0.6s ease;
    }
    
    .action-button:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 25px rgba(0, 226, 195, 0.4);
        color: #fff;
    }
    
    .action-button:hover::before {
        left: 100%;
    }
    
    .pulse-button {
        animation: subtle-pulse 2s infinite;
    }
    
    @keyframes subtle-pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.03); }
    }
    
    .button-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        width: 28px;
        height: 28px;
    }
    
    .button-arrow {
        transition: transform 0.3s ease;
    }
    
    .action-button:hover .button-arrow {
        transform: translateX(5px);
    }
    
    /* 3D Visualization */
    .hero-visual {
        position: relative;
        height: 100%;
    }
    
    .hero-image-container {
        position: relative;
        height: 400px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .image-glow {
        position: absolute;
        width: 80%;
        height: 80%;
        background: radial-gradient(ellipse at center, rgba(0, 226, 195, 0.15) 0%, transparent 70%);
        border-radius: 50%;
        filter: blur(30px);
    }
    
    .hero-3d-object {
        position: relative;
        z-index: 2;
        perspective: 1000px;
    }
    
    /* 3D Cube Animation */
    .cube-container {
        width: 200px;
        height: 200px;
        perspective: 1000px;
        margin: 0 auto;
    }
    
    .cube {
        width: 100%;
        height: 100%;
        position: relative;
        transform-style: preserve-3d;
        animation: rotate 20s infinite linear;
    }
    
    .cube-face {
        position: absolute;
        width: 200px;
        height: 200px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 5rem;
        font-weight: 700;
        font-family: 'JetBrains Mono', monospace;
        color: rgba(255, 255, 255, 0.9);
        border: 2px solid rgba(45, 127, 249, 0.5);
        box-shadow: 0 0 20px rgba(0, 226, 195, 0.3) inset;
        background: linear-gradient(135deg, rgba(45, 127, 249, 0.2), rgba(0, 226, 195, 0.2));
        backdrop-filter: blur(5px);
    }
    
    .front { transform: translateZ(100px); }
    .back { transform: rotateY(180deg) translateZ(100px); }
    .right { transform: rotateY(90deg) translateZ(100px); }
    .left { transform: rotateY(-90deg) translateZ(100px); }
    .top { transform: rotateX(90deg) translateZ(100px); }
    .bottom { transform: rotateX(-90deg) translateZ(100px); }
    
    @keyframes rotate {
        0% { transform: rotateY(0) rotateX(0); }
        100% { transform: rotateY(360deg) rotateX(360deg); }
    }
    
    /* Floating stats card */
    .stats-card {
        position: absolute;
        bottom: 30px;
        right: 20px;
        background: rgba(28, 35, 49, 0.8);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        padding: 12px 16px;
        display: flex;
        align-items: center;
        gap: 12px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        animation: float-stats 5s infinite alternate ease-in-out;
        z-index: 3;
    }
    
    @keyframes float-stats {
        0% { transform: translateY(0); }
        100% { transform: translateY(-15px); }
    }
    
    .stats-icon {
        background: linear-gradient(135deg, var(--accent-blue), var(--accent-turquoise));
        width: 40px;
        height: 40px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        color: white;
    }
    
    .stats-content {
        display: flex;
        flex-direction: column;
    }
    
    .stats-title {
        font-size: 0.8rem;
        color: var(--text-secondary);
    }
    
    .stats-value {
        font-size: 1.2rem;
        font-weight: 700;
        color: var(--accent-green);
    }
    
    /* Responsive adjustments */
    @media (max-width: 1024px) {
        .hero-title {
            font-size: 2.8rem;
        }
        
        .hero-features {
            flex-direction: column;
            align-items: flex-start;
        }
    }
    
    @media (max-width: 768px) {
        .hero-content {
            grid-template-columns: 1fr;
            gap: var(--spacing-xl);
        }
        
        .hero-title {
            font-size: 2.3rem;
        }
        
        .hero-description {
            font-size: 1rem;
        }
        
        .hero-image-container {
            height: 300px;
            margin-top: var(--spacing-lg);
        }
        
        .cube-container {
            width: 150px;
            height: 150px;
        }
        
        .cube-face {
            width: 150px;
            height: 150px;
            font-size: 4rem;
        }
        
        .front { transform: translateZ(75px); }
        .back { transform: rotateY(180deg) translateZ(75px); }
        .right { transform: rotateY(90deg) translateZ(75px); }
        .left { transform: rotateY(-90deg) translateZ(75px); }
        .top { transform: rotateX(90deg) translateZ(75px); }
        .bottom { transform: rotateX(-90deg) translateZ(75px); }
    }
</style>

  <!-- MAIN: PLEX MARATHON (Авторизация и Личный кабинет) -->
  <main id="plex-marathon">
    <!-- Экран авторизации -->
    <div id="login-screen">
      <h1>Авторизация</h1>
      <input type="text" id="bscAddress" placeholder="Введите ваш BSC-адрес (например, 0x...)">
      <button id="loginButton">Отправить 1 PLEX</button>
      <div id="loginError" class="error"></div>
      <div id="authInstructions" style="display:none;"></div>
    </div>

    <!-- Личный кабинет (скрыт до авторизации) -->
    <div id="cabinet" style="display:none;">
      <div class="header">
        <h2>Личный кабинет</h2>
        <div id="virtualDayDisplay">День: 0</div>
        <div id="debtIndicator">Долг: 0 PLEX</div>
      </div>

      <!-- Раздел "Добровольная карусель подарков" -->
      <div class="gift-carousel">
        <h3>Добровольная карусель подарков</h3>
        <p>Чтобы получить подарок, отправьте <strong>5 PLEX</strong> одной транзакцией на адрес:</p>
        <p style="text-align:center; font-weight:bold;">0x49eE383c6Ab984810B1BBD7726d6484fA41aA86e</p>
        <button id="giftTransactionButton">Я отправил 5 PLEX</button>
        <p id="giftAuthTimerDisplay"></p>
        <div id="giftCarouselContainer" style="display:none;">
          <div id="giftCarousel" class="fade-in" style="font-size:1.5rem; text-align:center; padding: var(--spacing-md);">
            <!-- Название подарка будет здесь -->
          </div>
          <p id="giftResult" style="margin-top: var(--spacing-md); font-size: 1.2rem;"></p>
        </div>
      </div>

      <!-- Тестовый уровень (расположен сразу под каруселью подарков) -->
      <div id="test-level-section">
        <div id="test-level-header">
          <div id="test-level-title">Тестовый уровень (Мониторинг BNB)</div>
          <button id="startTestLevelBtn" style="background: var(--accent-purple); border: none; padding: var(--spacing-sm) var(--spacing-md); border-radius: var(--border-radius-lg); cursor: pointer;">
            Начать мониторинг
          </button>
        </div>
        <p style="font-size:0.9rem; color: var(--text-secondary);">
          Здесь отображаются транзакции в BNB с нашего системного кошелька <strong>${systemWallet}</strong> на ваш кошелёк.
        </p>
        <div id="testLevelProgressContainer">
          <div id="testLevelProgressBar"></div>
        </div>
        <div id="testLevelStatus"></div>
        <div id="testLevelTxList"></div>
      </div>

      <!-- Потоки (закрашены серым) -->
      <div class="streams-container">
        <h3>Потоки</h3>
        <!-- Поток 1 -->
        <div class="stream-card" data-stream="1">
          <div class="stream-header">
            <div class="stream-title">Поток 1 (100 PLEX/сутки)</div>
            <div class="stream-streak">Дней подряд: <span class="streamCount">0</span></div>
          </div>
          <div class="stream-description">
            <p>Доход: ~20k–25k USD. Стабильные выплаты увеличивают бонусы!</p>
          </div>
          <div class="progress-bar-container">
            <div class="progress-bar"></div>
          </div>
          <button class="streamButton" data-amount="100">Внести 100 PLEX</button>
        </div>
        <!-- Поток 2 -->
        <div class="stream-card" data-stream="2">
          <div class="stream-header">
            <div class="stream-title">Поток 2 (200 PLEX/сутки)</div>
            <div class="stream-streak">Дней подряд: <span class="streamCount">0</span></div>
          </div>
          <div class="stream-description">
            <p>Стабильный доход и бонусы!</p>
          </div>
          <div class="progress-bar-container">
            <div class="progress-bar"></div>
          </div>
          <button class="streamButton" data-amount="200">Внести 200 PLEX</button>
        </div>
        <!-- Поток 3 -->
        <div class="stream-card" data-stream="3">
          <div class="stream-header">
            <div class="stream-title">Поток 3 (300 PLEX/сутки)</div>
            <div class="stream-streak">Дней подряд: <span class="streamCount">0</span></div>
          </div>
          <div class="stream-description">
            <p>Увеличение бонусов с каждым днем!</p>
          </div>
          <div class="progress-bar-container">
            <div class="progress-bar"></div>
          </div>
          <button class="streamButton" data-amount="300">Внести 300 PLEX</button>
        </div>
        <!-- Поток 4 -->
        <div class="stream-card" data-stream="4">
          <div class="stream-header">
            <div class="stream-title">Поток 4 (400 PLEX/сутки)</div>
            <div class="stream-streak">Дней подряд: <span class="streamCount">0</span></div>
          </div>
          <div class="stream-description">
            <p>Поддержка стабильного дохода!</p>
          </div>
          <div class="progress-bar-container">
            <div class="progress-bar"></div>
          </div>
          <button class="streamButton" data-amount="400">Внести 400 PLEX</button>
        </div>
        <!-- Поток 5 -->
        <div class="stream-card" data-stream="5">
          <div class="stream-header">
            <div class="stream-title">Поток 5 (500 PLEX/сутки)</div>
            <div class="stream-streak">Дней подряд: <span class="streamCount">0</span></div>
          </div>
          <div class="stream-description">
            <p>Максимальные бонусы для максимальных инвесторов!</p>
          </div>
          <div class="progress-bar-container">
            <div class="progress-bar"></div>
          </div>
          <button class="streamButton" data-amount="500">Внести 500 PLEX</button>
        </div>
      </div>

      <div class="rewards">
        <h3>Награды</h3>
        <button id="rewardButton" disabled>Получить награду</button>
        <div id="rewardDisplay"></div>
      </div>
    </div>
  </main>

<!-- FOOTER -->
<footer class="site-footer">
    <div class="footer-wave-top"></div>
    
    <div class="container">
        <!-- Footer Main Content -->
        <div class="footer-content">
            <div class="footer-column footer-about">
                <div class="footer-logo">
                    <div class="logo-mini">
                        <svg class="logo-svg-mini" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <linearGradient id="logoGradientFooter" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" stop-color="#2D7FF9" />
                                    <stop offset="100%" stop-color="#00E2C3" />
                                </linearGradient>
                            </defs>
                            <path d="M30 35L50 25L70 35L70 65L50 75L30 65Z" fill="none" stroke="url(#logoGradientFooter)" stroke-width="4"/>
                            <text x="32" y="62" font-family="Arial" font-weight="bold" font-size="28" fill="url(#logoGradientFooter)">PLEX</text>
                        </svg>
                    </div>
                    <span>Marathon</span>
                </div>
                <p>PLEX Marathon – современная децентрализованная платформа с потоками, бонусами и ускоренным режимом получения дохода.</p>
                <div class="social-links">
                    <a href="#" title="Telegram"><i class="ri-telegram-fill"></i></a>
                    <a href="#" title="Twitter"><i class="ri-twitter-fill"></i></a>
                    <a href="#" title="Discord"><i class="ri-discord-fill"></i></a>
                    <a href="#" title="Medium"><i class="ri-medium-fill"></i></a>
                </div>
            </div>
            
            <div class="footer-column footer-links">
                <h4>Быстрые ссылки</h4>
                <ul>
                    <li><a href="#about">О проекте</a></li>
                    <li><a href="#plex-marathon">Начать марафон</a></li>
                    <li><a href="#faq">Частые вопросы</a></li>
                    <li><a href="#contact">Обратная связь</a></li>
                </ul>
            </div>
            
            <div class="footer-column footer-resources">
                <h4>Ресурсы</h4>
                <ul>
                    <li><a href="#roadmap">Дорожная карта</a></li>
                    <li><a href="#tokenomics">Токеномика</a></li>
                    <li><a href="#whitepaper">Whitepaper</a></li>
                    <li><a href="#audit">Аудит</a></li>
                </ul>
            </div>
        </div>
        
        <!-- Token Purchase Guide -->
        <div class="token-guide-section">
            <div class="section-header">
                <i class="ri-coin-line coin-icon"></i>
                <h3>Как купить PLEX в Trust Wallet</h3>
            </div>
            
            <div class="token-address-box">
                <div class="token-info">
                    <span>Адрес токена PLEX:</span>
                    <div class="address-container">
                        <code id="tokenAddress">0x7ba98610531ad480f71f7d43b7aa26882cb6d32f</code>
                        <button id="copyTokenAddress" class="copy-btn" title="Копировать адрес">
                            <i class="ri-file-copy-line"></i>
                        </button>
                    </div>
                </div>
                <div class="token-qr" id="tokenQR"></div>
            </div>
            
            <div class="guide-steps">
                <div class="guide-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h5>Установите Trust Wallet</h5>
                        <p>Скачайте приложение Trust Wallet из App Store или Google Play</p>
                    </div>
                </div>
                
                <div class="guide-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h5>Пополните кошелек BNB</h5>
                        <p>Для покупки PLEX вам понадобится BNB Smart Chain (BEP-20)</p>
                    </div>
                </div>
                
                <div class="guide-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h5>Перейдите в DApp Browser</h5>
                        <p>Откройте PancakeSwap через вкладку DApps в Trust Wallet</p>
                    </div>
                </div>
                
                <div class="guide-step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h5>Добавьте адрес PLEX</h5>
                        <p>Вставьте адрес токена в поле "Выберите валюту"</p>
                    </div>
                </div>
                
                <div class="guide-step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <h5>Настройте обмен</h5>
                        <p>Установите желаемое количество BNB для обмена на PLEX и проверьте детали</p>
                    </div>
                </div>
                
                <div class="guide-step">
                    <div class="step-number">6</div>
                    <div class="step-content">
                        <h5>Подтвердите обмен</h5>
                        <p>Нажмите "Swap" и подтвердите транзакцию</p>
                    </div>
                </div>
            </div>
            
            <div class="video-guide">
                <button class="video-guide-btn" id="showVideoGuide">
                    <i class="ri-youtube-fill"></i>
                    <span>Смотреть видеоинструкцию</span>
                </button>
            </div>
        </div>
        
        <!-- Footer Bottom -->
        <div class="footer-bottom">
            <div class="copyright">
                &copy; 2023 PLEX Marathon. Все права защищены.
            </div>
            <div class="footer-nav">
                <a href="#terms">Условия использования</a>
                <a href="#privacy">Политика конфиденциальности</a>
                <a href="#disclaimer">Отказ от ответственности</a>
            </div>
        </div>
    </div>
    
    <div class="footer-wave-bottom"></div>
</footer>

<!-- Video Guide Modal -->
<div class="modal" id="videoModal">
    <div class="modal-content">
        <div class="modal-header">
            <h4>Как купить PLEX в Trust Wallet</h4>
            <button class="modal-close" id="closeVideoModal"><i class="ri-close-line"></i></button>
        </div>
        <div class="modal-body">
            <div class="video-container">
                <div class="video-placeholder">
                    <i class="ri-video-line"></i>
                    <p>Здесь будет видео с инструкцией по покупке PLEX</p>
                </div>
                <!-- Раскомментируйте, когда будет доступно видео -->
                <!-- <iframe width="560" height="315" src="https://www.youtube.com/embed/VIDEO_ID" frameborder="0" allowfullscreen></iframe> -->
            </div>
        </div>
    </div>
</div>

<!-- Footer Styles -->
<style>
    .site-footer {
        position: relative;
        background: linear-gradient(180deg, #0f1623, #0A0E17);
        color: var(--text-secondary);
        margin-top: calc(var(--spacing-xl) * 2);
        padding: var(--spacing-xl) 0 var(--spacing-lg);
        overflow: hidden;
    }
    
    .footer-wave-top, .footer-wave-bottom {
        position: absolute;
        left: 0;
        width: 100%;
        height: 50px;
        background-repeat: no-repeat;
        background-size: cover;
    }
    
    .footer-wave-top {
        top: 0;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 1200 120' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='%230A0E17' d='M985.66,92.83C906.67,72,823.78,31,743.84,14.19c-82.26-17.34-168.06-16.33-250.45.39-57.84,11.73-114,31.07-172,41.86A600.21,600.21,0,0,1,0,27.35V120H1200V95.8C1132.19,118.92,1055.71,111.31,985.66,92.83Z'%3E%3C/path%3E%3C/svg%3E");
        transform: rotate(180deg);
    }
    
    .footer-wave-bottom {
        bottom: 0;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 1200 120' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='%230A0E17' d='M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z'%3E%3C/path%3E%3C/svg%3E");
    }
    
    .footer-content {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr;
        gap: var(--spacing-xl);
        padding: var(--spacing-xl) 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .footer-column {
        padding-right: var(--spacing-md);
    }
    
    .footer-about p {
        margin-top: var(--spacing-md);
        margin-bottom: var(--spacing-md);
        color: var(--text-secondary);
        line-height: 1.6;
    }
    
    .footer-logo {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
        margin-bottom: var(--spacing-lg);
    }
    
    .logo-mini {
        width: 40px;
        height: 40px;
    }
    
    .logo-svg-mini {
        width: 100%;
        height: 100%;
        filter: drop-shadow(0 0 5px rgba(0,226,195,0.4));
    }
    
    .footer-logo span {
        font-size: 1.5rem;
        font-weight: 700;
        background: linear-gradient(90deg, var(--accent-blue), var(--accent-turquoise));
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
    }
    
    .social-links {
        display: flex;
        gap: var(--spacing-md);
        margin-top: var(--spacing-lg);
    }
    
    .social-links a {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 38px;
        height: 38px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.05);
        color: var(--text-primary);
        font-size: 1.2rem;
        transition: all 0.3s ease;
    }
    
    .social-links a:hover {
        transform: translateY(-3px);
        background: linear-gradient(135deg, var(--accent-blue), var(--accent-turquoise));
        color: white;
        box-shadow: 0 5px 15px rgba(0, 226, 195, 0.3);
    }
    
    .footer-column h4 {
        font-size: 1.2rem;
        margin-bottom: var(--spacing-lg);
        color: var(--text-primary);
        position: relative;
        display: inline-block;
    }
    
    .footer-column h4::after {
        content: '';
        position: absolute;
        bottom: -8px;
        left: 0;
        width: 40px;
        height: 3px;
        background: linear-gradient(90deg, var(--accent-blue), var(--accent-turquoise));
        border-radius: 2px;
    }
    
    .footer-column ul {
        list-style: none;
        padding: 0;
    }
    
    .footer-column li {
        margin-bottom: var(--spacing-sm);
    }
    
    .footer-column a {
        color: var(--text-secondary);
        text-decoration: none;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
    }
    
    .footer-column a:hover {
        color: var(--accent-turquoise);
        transform: translateX(5px);
    }
    
    .token-guide-section {
        background: rgba(28, 35, 49, 0.5);
        border-radius: var(--border-radius-lg);
        padding: var(--spacing-xl);
        margin: var(--spacing-xl) 0;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.05);
    }
    
    .section-header {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        margin-bottom: var(--spacing-lg);
    }
    
    .coin-icon {
        font-size: 2rem;
        background: linear-gradient(135deg, var(--accent-blue), var(--accent-turquoise));
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
    }
    
    .section-header h3 {
        font-size: 1.6rem;
        color: var(--text-primary);
        margin: 0;
    }
    
    .token-address-box {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: rgba(10, 14, 23, 0.5);
        border-radius: var(--border-radius-lg);
        padding: var(--spacing-md);
        margin-bottom: var(--spacing-lg);
        flex-wrap: wrap;
        gap: var(--spacing-md);
    }
    
    .token-info {
        flex: 1;
        min-width: 280px;
    }
    
    .token-info span {
        display: block;
        margin-bottom: var(--spacing-sm);
        color: var(--text-primary);
        font-weight: 500;
    }
    
    .address-container {
        display: flex;
        align-items: center;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 8px;
        padding: 8px 12px;
        margin-top: var(--spacing-sm);
        position: relative;
        overflow: hidden;
    }
    
    .address-container code {
        font-family: 'JetBrains Mono', monospace;
        color: var(--accent-turquoise);
        overflow: hidden;
        text-overflow: ellipsis;
        word-break: break-all;
        font-size: 0.9rem;
    }
    
    .copy-btn {
        background: rgba(255, 255, 255, 0.1);
        border: none;
        color: var(--text-secondary);
        border-radius: 4px;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-left: var(--spacing-sm);
        flex-shrink: 0;
    }
    
    .copy-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        color: var(--text-primary);
    }
    
    .token-qr {
        background: white;
        padding: var(--spacing-sm);
        border-radius: 8px;
        width: 120px;
        height: 120px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .guide-steps {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: var(--spacing-lg);
        margin-bottom: var(--spacing-xl);
    }
    
    .guide-step {
        display: flex;
        gap: var(--spacing-md);
        background: rgba(255, 255, 255, 0.03);
        border-radius: var(--border-radius-lg);
        padding: var(--spacing-md);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .guide-step:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }
    
    .step-number {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        background: linear-gradient(135deg, var(--accent-blue), var(--accent-turquoise));
        color: white;
        border-radius: 50%;
        font-weight: bold;
        flex-shrink: 0;
    }
    
    .step-content {
        flex: 1;
    }
    
    .step-content h5 {
        margin: 0 0 var(--spacing-sm);
        color: var(--text-primary);
        font-size: 1.1rem;
    }
    
    .step-content p {
        margin: 0;
        color: var(--text-secondary);
        font-size: 0.9rem;
        line-height: 1.5;
    }
    
    .video-guide {
        display: flex;
        justify-content: center;
        margin-top: var(--spacing-lg);
    }
    
    .video-guide-btn {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
        background: linear-gradient(135deg, var(--accent-purple), var(--accent-blue));
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 30px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(156, 95, 255, 0.3);
    }
    
    .video-guide-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(156, 95, 255, 0.4);
    }
    
    .video-guide-btn i {
        font-size: 1.3rem;
        color: #ff0000;
        background: white;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .footer-bottom {
        padding-top: var(--spacing-lg);
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: var(--spacing-md);
    }
    
    .copyright {
        color: var(--text-tertiary);
        font-size: 0.9rem;
    }
    
    .footer-nav {
        display: flex;
        gap: var(--spacing-md);
        flex-wrap: wrap;
    }
    
    .footer-nav a {
        color: var(--text-tertiary);
        font-size: 0.9rem;
        text-decoration: none;
        transition: color 0.3s ease;
    }
    
    .footer-nav a:hover {
        color: var(--accent-blue);
    }
    
    /* Modal Styles */
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 10000;
        align-items: center;
        justify-content: center;
    }
    
    .modal.show {
        display: flex;
        animation: fadeIn 0.3s ease forwards;
    }
    
    .modal-content {
        background: var(--bg-card);
        border-radius: var(--border-radius-lg);
        max-width: 800px;
        width: 90%;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        overflow: hidden;
        animation: scaleIn 0.3s ease forwards;
    }
    
    .modal-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: var(--spacing-md) var(--spacing-lg);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .modal-header h4 {
        margin: 0;
        color: var(--text-primary);
        font-size: 1.4rem;
    }
    
    .modal-close {
        background: none;
        border: none;
        color: var(--text-secondary);
        font-size: 1.5rem;
        cursor: pointer;
        transition: color 0.3s ease;
    }
    
    .modal-close:hover {
        color: var(--accent-red);
    }
    
    .modal-body {
        padding: var(--spacing-lg);
    }
    
    .video-container {
        position: relative;
        padding-bottom: 56.25%;
        height: 0;
        overflow: hidden;
        border-radius: 12px;
        background: #000;
    }
    
    .video-container iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border-radius: 12px;
    }
    
    .video-placeholder {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: rgba(10, 14, 23, 0.9);
        color: var(--text-secondary);
        gap: var(--spacing-md);
    }
    
    .video-placeholder i {
        font-size: 3rem;
        color: var(--accent-red);
    }
    
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    
    @keyframes scaleIn {
        from { transform: scale(0.9); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
    }
    
    /* Responsive adjustments */
    @media (max-width: 992px) {
        .footer-content {
            grid-template-columns: 1fr 1fr;
        }
        
        .footer-about {
            grid-column: span 2;
        }
    }
    
    @media (max-width: 768px) {
        .footer-content {
            grid-template-columns: 1fr;
        }
        
        .footer-about {
            grid-column: span 1;
        }
        
        .token-address-box {
            flex-direction: column;
        }
        
        .token-qr {
            margin: 0 auto;
        }
        
        .footer-bottom {
            flex-direction: column;
            text-align: center;
        }
        
        .footer-nav {
            justify-content: center;
        }
    }
</style>

<!-- Footer Scripts -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize QR Code
        if(typeof QRCode !== 'undefined') {
            new QRCode(document.getElementById("tokenQR"), {
                text: "0x7ba98610531ad480f71f7d43b7aa26882cb6d32f",
                width: 120,
                height: 120,
                colorDark: "#000000",
                colorLight: "#ffffff"
            });
        }
        
        // Copy token address functionality
        const copyBtn = document.getElementById('copyTokenAddress');
        if(copyBtn) {
            copyBtn.addEventListener('click', function() {
                const tokenAddress = document.getElementById('tokenAddress').textContent;
                navigator.clipboard.writeText(tokenAddress)
                    .then(() => {
                        // Success feedback
                        copyBtn.innerHTML = '<i class="ri-check-line"></i>';
                        copyBtn.style.background = 'var(--accent-green)';
                        copyBtn.style.color = 'white';
                        
                        setTimeout(() => {
                            copyBtn.innerHTML = '<i class="ri-file-copy-line"></i>';
                            copyBtn.style.background = '';
                            copyBtn.style.color = '';
                        }, 2000);
                        
                        // Show notification
                        showNotification('Адрес токена скопирован!', 'success');
                    })
                    .catch(err => {
                        console.error('Не удалось скопировать: ', err);
                        showNotification('Не удалось скопировать адрес', 'error');
                    });
            });
        }
        
        // Video modal functionality
        const showVideoBtn = document.getElementById('showVideoGuide');
        const videoModal = document.getElementById('videoModal');
        const closeVideoModal = document.getElementById('closeVideoModal');
        
        if(showVideoBtn && videoModal && closeVideoModal) {
            showVideoBtn.addEventListener('click', function() {
                videoModal.classList.add('show');
                document.body.style.overflow = 'hidden'; // Prevent scrolling
            });
            
            closeVideoModal.addEventListener('click', function() {
                videoModal.classList.remove('show');
                document.body.style.overflow = '';
            });
            
            // Close modal when clicking outside
            videoModal.addEventListener('click', function(e) {
                if(e.target === videoModal) {
                    videoModal.classList.remove('show');
                    document.body.style.overflow = '';
                }
            });
            
            // Close on ESC key
            document.addEventListener('keydown', function(e) {
                if(e.key === 'Escape' && videoModal.classList.contains('show')) {
                    videoModal.classList.remove('show');
                    document.body.style.overflow = '';
                }
            });
        }
    });
</script>

<!-- Улучшенный оверлей бездействия -->
<div id="idleOverlay" class="idle-overlay">
    <div class="idle-content">
        <div class="idle-icon">
            <i class="ri-time-line"></i>
            <div class="pulse-circle"></div>
        </div>
        
        <h2 class="idle-title">Сессия истекает</h2>
        
        <div class="idle-timer">
            <svg viewBox="0 0 36 36" class="idle-timer-circle">
                <path class="timer-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                <path class="timer-progress" id="idleTimerProgress" stroke-dasharray="100, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path>
            </svg>
            <span id="idleCountdown">60</span>
        </div>
        
        <p class="idle-message">Из-за отсутствия активности ваша сессия будет завершена.</p>
        
        <div class="idle-actions">
            <button id="continueSessionBtn" class="idle-continue-btn">
                <i class="ri-restart-line"></i>
                <span>Продолжить сессию</span>
            </button>
            
            <button id="logoutNowBtn" class="idle-logout-btn">
                <i class="ri-logout-box-r-line"></i>
                <span>Выйти сейчас</span>
            </button>
        </div>
    </div>
</div>

<style>
    .idle-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(10, 14, 23, 0.85);
        backdrop-filter: blur(10px);
        z-index: 10000;
        display: none;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.5s ease;
    }
    
    .idle-overlay.show {
        opacity: 1;
    }
    
    .idle-content {
        width: 90%;
        max-width: 450px;
        background: var(--bg-card);
        border-radius: var(--border-radius-lg);
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: calc(var(--spacing-lg) * 1.5);
        text-align: center;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        animation: idle-panel-in 0.5s forwards;
    }
    
    .idle-icon {
        font-size: 3rem;
        color: var(--accent-yellow);
        margin-bottom: var(--spacing-md);
        position: relative;
        display: inline-block;
    }
    
    .pulse-circle {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 70px;
        height: 70px;
        border-radius: 50%;
        background: rgba(255, 204, 0, 0.1);
        animation: pulse-fade 2s infinite;
        z-index: -1;
    }
    
    .idle-title {
        font-size: 1.8rem;
        color: var(--text-primary);
        margin-bottom: var(--spacing-md);
    }
    
    .idle-timer {
        position: relative;
        width: 100px;
        height: 100px;
        margin: 0 auto var(--spacing-lg);
    }
    
    .idle-timer-circle {
        transform: rotate(-90deg);
        width: 100%;
        height: 100%;
    }
    
    .idle-timer-circle path {
        fill: none;
        stroke-width: 3;
        stroke-linecap: round;
    }
    
    .timer-bg {
        stroke: rgba(255, 255, 255, 0.1);
    }
    
    .timer-progress {
        stroke: var(--accent-yellow);
        transition: stroke-dasharray 1s linear;
    }
    
    #idleCountdown {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 2rem;
        font-weight: 700;
        color: var(--accent-yellow);
    }
    
    .idle-message {
        color: var(--text-secondary);
        margin-bottom: var(--spacing-lg);
        line-height: 1.5;
    }
    
    .idle-actions {
        display: flex;
        gap: var(--spacing-md);
        justify-content: center;
        flex-wrap: wrap;
    }
    
    .idle-continue-btn, .idle-logout-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 12px 20px;
        border-radius: 30px;
        border: none;
        font-size: 1rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .idle-continue-btn {
        background: linear-gradient(45deg, var(--accent-green), var(--accent-blue));
        color: white;
        flex: 3;
        max-width: 220px;
    }
    
    .idle-logout-btn {
        background: rgba(255, 255, 255, 0.1);
        color: var(--text-secondary);
        flex: 2;
        max-width: 140px;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .idle-continue-btn:hover {
        box-shadow: 0 5px 15px rgba(76, 217, 100, 0.4);
        transform: translateY(-3px);
    }
    
    .idle-logout-btn:hover {
        background: rgba(255, 59, 48, 0.2);
        color: var(--accent-red);
        transform: translateY(-3px);
    }
    
    @keyframes idle-panel-in {
        from { transform: translateY(20px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }
    
    @keyframes pulse-fade {
        0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; }
        50% { transform: translate(-50%, -50%) scale(1.3); opacity: 0; }
    }
    
    @media (max-width: 480px) {
        .idle-actions {
            flex-direction: column;
        }
        
        .idle-continue-btn, .idle-logout-btn {
            max-width: none;
            width: 100%;
        }
    }
</style>

<script>
    // Idle overlay functionality
    document.addEventListener('DOMContentLoaded', function() {
        const idleOverlay = document.getElementById('idleOverlay');
        const continueBtn = document.getElementById('continueSessionBtn');
        const logoutBtn = document.getElementById('logoutNowBtn');
        const countdownEl = document.getElementById('idleCountdown');
        const timerProgress = document.getElementById('idleTimerProgress');
        
        let idleCountdown = 60; // 60 seconds countdown
        let countdownInterval;
        
        function startIdleCountdown() {
            idleOverlay.style.display = 'flex';
            setTimeout(() => idleOverlay.classList.add('show'), 10);
            
            countdownInterval = setInterval(() => {
                idleCountdown--;
                countdownEl.textContent = idleCountdown;
                
                // Update the progress circle
                const progress = (idleCountdown / 60) * 100;
                timerProgress.setAttribute('stroke-dasharray', `${progress}, 100`);
                
                // Change color as time runs out
                if (idleCountdown <= 15) {
                    timerProgress.style.stroke = 'var(--accent-red)';
                    countdownEl.style.color = 'var(--accent-red)';
                }
                
                if (idleCountdown <= 0) {
                    clearInterval(countdownInterval);
                    location.reload();
                }
            }, 1000);
        }
        
        function stopIdleCountdown() {
            clearInterval(countdownInterval);
            idleCountdown = 60;
            countdownEl.textContent = idleCountdown;
            timerProgress.setAttribute('stroke-dasharray', '100, 100');
            timerProgress.style.stroke = 'var(--accent-yellow)';
            countdownEl.style.color = 'var(--accent-yellow)';
            idleOverlay.classList.remove('show');
            setTimeout(() => idleOverlay.style.display = 'none', 500);
        }
        
        // Continue session button
        continueBtn.addEventListener('click', function() {
            stopIdleCountdown();
            resetIdleTimer(); // Reset the main idle timer
            showNotification('Сессия продолжена', 'success');
        });
        
        // Logout now button
        logoutBtn.addEventListener('click', function() {
            location.reload();
        });
        
        // Make the idle overlay accessible from the main script
        window.showIdleOverlay = startIdleCountdown;
        window.hideIdleOverlay = stopIdleCountdown;
    });
</script>

  <!-- Скрипты -->
<script>
    /* Основные переменные и функции Marathon */
    let idleTimer, virtualDayTimer;
    let currentVirtualDay = 0;
    let streamsStatus = {
        1: { count: 0, paidToday: false },
        2: { count: 0, paidToday: false },
        3: { count: 0, paidToday: false },
        4: { count: 0, paidToday: false },
        5: { count: 0, paidToday: false }
    };
    let debt = 0;
    let rewardClaimedToday = false;
    let userWallet = '';
    let authTimer; // 5-минутный таймер проверки транзакции
    let authStartTime;
    const systemWallet = "0x49eE383c6Ab984810B1BBD7726d6484fA41aA86e";
    let lastActivity = Date.now();

    // Функция для отображения уведомлений
    function showNotification(message, type = 'info', duration = 3000) {
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.innerHTML = `
            <div class="notification-icon">${type === 'success' ? '✓' : type === 'error' ? '✕' : 'ℹ'}</div>
            <div class="notification-message">${message}</div>
        `;
        document.body.appendChild(notification);
        
        // Анимация появления
        setTimeout(() => notification.classList.add('show'), 10);
        
        // Автоматическое скрытие
        setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => notification.remove(), 300);
        }, duration);
    }

    // Улучшенный таймер бездействия с предупреждением
    function resetIdleTimer() {
        clearTimeout(idleTimer);
        lastActivity = Date.now();
        
        const idleOverlay = document.getElementById('idleOverlay');
        if (idleOverlay.style.display === 'flex') {
            idleOverlay.style.display = 'none';
        }
        
        idleTimer = setTimeout(() => {
            // Предупреждение за минуту до завершения сессии
            showNotification('Ваша сессия скоро завершится из-за отсутствия активности!', 'warning', 10000);
            
            setTimeout(() => {
                document.getElementById('idleOverlay').style.display = 'flex';
                document.getElementById('idleOverlay').classList.add('fade-in');
                setTimeout(() => { location.reload(); }, 3000);
            }, 60000);
        }, 540000); // 9 минут до предупреждения
    }

    function goToCabinet() {
        document.getElementById('login-screen').classList.add('fade-out');
        setTimeout(() => {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('cabinet').style.display = 'block';
            document.getElementById('cabinet').classList.add('fade-in');
            resetIdleTimer();
            showNotification('Авторизация успешна! Добро пожаловать в личный кабинет.', 'success');
        }, 500);
    }

    function isValidAddress(address) {
        return /^0x[a-fA-F0-9]{40}$/.test(address);
    }

    // Улучшенная проверка транзакции с визуальным индикатором загрузки
    function checkTransaction() {
        const apiKey = "ARA9FYMNCIZHTB2PPBSWF686GID9F99P41";
        const tokenContract = "0x7ba98610531ad480f71f7d43b7aa26882cb6d32f";
        const receivingAddress = systemWallet;
        const requiredValue = "1000000000000000000"; // 1 PLEX
        const url = `https://api.bscscan.com/api?module=account&action=tokentx&contractaddress=${tokenContract}&address=${userWallet}&startblock=0&endblock=99999999&sort=desc&apikey=${apiKey}`;
        
        // Показываем индикатор загрузки
        document.getElementById('authTimerDisplay').innerHTML = `
            <div class="loading-spinner"></div>
            <span>Проверяем транзакцию...</span>
        `;
        
        fetch(url)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Ошибка сети при проверке транзакции');
                }
                return response.json();
            })
            .then(data => {
                if(data.status === "1" && Array.isArray(data.result)) {
                    let confirmed = false;
                    for (let tx of data.result) {
                        if(
                            tx.from.toLowerCase() === userWallet.toLowerCase() &&
                            tx.to.toLowerCase() === receivingAddress.toLowerCase() &&
                            tx.value === "1000000000000000000"
                        ) {
                            let txTime = parseInt(tx.timeStamp) * 1000;
                            if(txTime >= authStartTime - 300000 && txTime <= authStartTime + 300000) { // Расширенное окно проверки
                                confirmed = true;
                                break;
                            }
                        }
                    }
                    if(confirmed) {
                        clearTimeout(authTimer);
                        document.getElementById('authTimerDisplay').innerHTML = `
                            <div class="success-message"><i class="ri-checkbox-circle-fill"></i> Транзакция подтверждена!</div>
                        `;
                        setTimeout(() => { goToCabinet(); }, 1000);
                    } else {
                        document.getElementById('authTimerDisplay').innerHTML = `
                            <div class="pending-message"><i class="ri-time-line"></i> Транзакция не найдена. Подождите несколько минут и нажмите "Проверить еще раз"</div>
                            <button id="recheckButton" class="recheck-button">Проверить еще раз</button>
                        `;
                        document.getElementById('recheckButton').addEventListener('click', checkTransaction);
                    }
                } else {
                    document.getElementById('authTimerDisplay').innerHTML = `
                        <div class="error-message"><i class="ri-error-warning-fill"></i> Ошибка проверки транзакции</div>
                        <button id="recheckButton" class="recheck-button">Попробовать снова</button>
                    `;
                    document.getElementById('recheckButton').addEventListener('click', checkTransaction);
                }
            })
            .catch(err => {
                console.error(err);
                document.getElementById('authTimerDisplay').innerHTML = `
                    <div class="error-message"><i class="ri-wifi-off-line"></i> Ошибка сети. Проверьте подключение</div>
                    <button id="recheckButton" class="recheck-button">Попробовать снова</button>
                `;
                document.getElementById('recheckButton').addEventListener('click', checkTransaction);
            });
    }

    document.getElementById('loginButton').addEventListener('click', () => {
        const address = document.getElementById('bscAddress').value.trim();
        if (isValidAddress(address)) {
            userWallet = address;
            document.getElementById('bscAddress').style.display = 'none';
            document.getElementById('loginButton').style.display = 'none';
            document.getElementById('loginError').innerText = '';
            const authDiv = document.getElementById('authInstructions');
            authDiv.style.display = 'block';
            authDiv.classList.add('fade-in');
            authDiv.innerHTML = `
                <h2>Проверка транзакции</h2>
                <p>Ваш кошелек: <strong>${userWallet}</strong></p>
                <div class="wallet-copy">
                    <button id="copyWalletBtn" class="copy-button" title="Копировать адрес">
                        <i class="ri-file-copy-line"></i>
                    </button>
                </div>
                <p>Переведите <strong>1 PLEX</strong> на адрес:</p>
                <div class="system-wallet-container">
                    <code>${systemWallet}</code>
                    <button id="copySystemBtn" class="copy-button" title="Копировать адрес">
                        <i class="ri-file-copy-line"></i>
                    </button>
                </div>
                <div class="qr-code-container" id="systemWalletQR"></div>
                <button id="sentButton" class="action-button pulse-animation">
                    <i class="ri-checkbox-circle-line"></i> Я отправил 1 PLEX
                </button>
                <p id="authTimerDisplay" class="timer-display"></p>
            `;
            
            // Генерируем QR-код для удобства мобильных пользователей
            if (window.QRCode) {
                new QRCode(document.getElementById("systemWalletQR"), {
                    text: systemWallet,
                    width: 128,
                    height: 128
                });
            }
            
            // Копирование адресов в буфер обмена
            document.getElementById('copyWalletBtn').addEventListener('click', () => {
                navigator.clipboard.writeText(userWallet)
                    .then(() => showNotification('Адрес скопирован!', 'success'))
                    .catch(err => showNotification('Ошибка копирования', 'error'));
            });
            
            document.getElementById('copySystemBtn').addEventListener('click', () => {
                navigator.clipboard.writeText(systemWallet)
                    .then(() => showNotification('Адрес скопирован!', 'success'))
                    .catch(err => showNotification('Ошибка копирования', 'error'));
            });
            
            authStartTime = Date.now();
            authTimer = setTimeout(() => {
                document.getElementById('authTimerDisplay').innerHTML = `
                    <div class="error-message"><i class="ri-time-line"></i> Время истекло, транзакция не найдена</div>
                    <button id="restartBtn" class="action-button">Начать заново</button>
                `;
                document.getElementById('restartBtn').addEventListener('click', () => location.reload());
            }, 300000);
            
            let countdownInterval = setInterval(() => {
                let elapsed = Date.now() - authStartTime;
                let remaining = 300000 - elapsed;
                if (remaining < 0) remaining = 0;
                let minutes = Math.floor(remaining / 60000);
                let seconds = Math.floor((remaining % 60000) / 1000);
                document.getElementById('authTimerDisplay').innerHTML = `
                    <div class="timer-circle">
                        <svg viewBox="0 0 36 36">
                            <path class="timer-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                            <path class="timer-progress" stroke-dasharray="${(remaining/300000)*100}, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                        </svg>
                        <span>${minutes}:${seconds < 10 ? '0' : ''}${seconds}</span>
                    </div>
                `;
                if (remaining <= 0) { clearInterval(countdownInterval); }
            }, 1000);
            
            document.getElementById('sentButton').addEventListener('click', () => {
                checkTransaction();
            });
        } else {
            document.getElementById('loginError').innerHTML = `
                <div class="error-with-icon"><i class="ri-error-warning-line"></i> Введите корректный BSC адрес</div>
            `;
            // Анимация встряхивания для поля ввода
            document.getElementById('bscAddress').classList.add('shake-animation');
            setTimeout(() => {
                document.getElementById('bscAddress').classList.remove('shake-animation');
            }, 500);
        }
    });

    /* --- Улучшенная секция "Добровольная карусель подарков" --- */
    let giftSpinCount = 0;
    let giftCarouselInterval;
    let giftSpinDuration = 15000; // 15 секунд
    let giftAuthTimer, giftAuthStartTime;
    const commonPool = [
        { gift: "1 свободный реферал", weight: 30, icon: "ri-user-add-line" },
        { gift: "2 свободных реферала", weight: 20, icon: "ri-user-star-line" },
        { gift: "3 свободных реферала", weight: 10, icon: "ri-team-line" },
        { gift: "3 PLEX", weight: 40, icon: "ri-coin-line" },
        { gift: "5 PLEX", weight: 40, icon: "ri-coins-line" }
    ];
    const rarePool = [
        { gift: "10 PLEX", weight: 1, icon: "ri-money-dollar-circle-line", rare: true },
        { gift: "25 PLEX", weight: 1, icon: "ri-money-dollar-box-line", rare: true },
        { gift: "200 PLEX", weight: 1, icon: "ri-vip-crown-line", rare: true },
        { gift: "500 PLEX", weight: 1, icon: "ri-vip-diamond-line", rare: true },
        { gift: "100 USDT", weight: 1, icon: "ri-coupon-line", rare: true }
    ];

    function checkGiftTransaction() {
        // Для тестирования можно добавить симуляцию через URL-параметр "simulateGift"
        if(window.location.search.includes("simulateGift")) {
            console.log("Симуляция подарочной транзакции");
            startGiftCarousel();
            return;
        }
        
        // Показываем индикатор загрузки
        document.getElementById('giftAuthTimerDisplay').innerHTML = `
            <div class="loading-spinner"></div>
            <span>Проверяем транзакцию...</span>
        `;
        
        const apiKey = "ARA9FYMNCIZHTB2PPBSWF686GID9F99P41";
        const tokenContract = "0x7ba98610531ad480f71f7d43b7aa26882cb6d32f";
        const receivingAddress = systemWallet;
        const requiredValue = "5000000000000000000"; // 5 PLEX
        const url = `https://api.bscscan.com/api?module=account&action=tokentx&contractaddress=${tokenContract}&address=${userWallet}&startblock=0&endblock=99999999&sort=desc&apikey=${apiKey}`;
        
        fetch(url)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Ошибка сети при проверке транзакции');
                }
                return response.json();
            })
            .then(data => {
                if (data.status === "1" && Array.isArray(data.result)) {
                    let confirmed = false;
                    for (let tx of data.result) {
                        if (
                            tx.from.toLowerCase() === userWallet.toLowerCase() &&
                            tx.to.toLowerCase() === receivingAddress.toLowerCase() &&
                            tx.value === requiredValue
                        ) {
                            let txTime = parseInt(tx.timeStamp) * 1000;
                            if (txTime >= giftAuthStartTime - 300000 && txTime <= giftAuthStartTime + 300000) {
                                confirmed = true;
                                break;
                            }
                        }
                    }
                    if (confirmed) {
                        clearTimeout(giftAuthTimer);
                        document.getElementById('giftAuthTimerDisplay').innerHTML = `
                            <div class="success-message"><i class="ri-checkbox-circle-fill"></i> Транзакция подтверждена!</div>
                        `;
                        setTimeout(() => { startGiftCarousel(); }, 1000);
                    } else {
                        document.getElementById('giftAuthTimerDisplay').innerHTML = `
                            <div class="pending-message"><i class="ri-time-line"></i> Транзакция не найдена</div>
                            <button id="recheckGiftButton" class="recheck-button">Проверить еще раз</button>
                        `;
                        document.getElementById('recheckGiftButton').addEventListener('click', checkGiftTransaction);
                    }
                } else {
                    document.getElementById('giftAuthTimerDisplay').innerHTML = `
                        <div class="error-message"><i class="ri-error-warning-fill"></i> Ошибка проверки транзакции</div>
                        <button id="recheckGiftButton" class="recheck-button">Попробовать снова</button>
                    `;
                    document.getElementById('recheckGiftButton').addEventListener('click', checkGiftTransaction);
                }
            })
            .catch(err => {
                console.error(err);
                document.getElementById('giftAuthTimerDisplay').innerHTML = `
                    <div class="error-message"><i class="ri-wifi-off-line"></i> Ошибка сети</div>
                    <button id="recheckGiftButton" class="recheck-button">Попробовать снова</button>
                `;
                document.getElementById('recheckGiftButton').addEventListener('click', checkGiftTransaction);
            });
    }

    document.getElementById('giftTransactionButton').addEventListener('click', () => {
        if (!userWallet) {
            showNotification("Сначала пройдите авторизацию", "error");
            return;
        }
        
        giftAuthStartTime = Date.now();
        document.getElementById('giftTransactionButton').disabled = true;
        
        // Копируем адрес кошелька в буфер при нажатии
        navigator.clipboard.writeText(systemWallet)
            .then(() => showNotification('Адрес кошелька скопирован в буфер обмена', 'info'))
            .catch(() => {});
        
        giftAuthTimer = setTimeout(() => {
            document.getElementById('giftAuthTimerDisplay').innerHTML = `
                <div class="error-message"><i class="ri-time-line"></i> Время истекло, транзакция не найдена</div>
            `;
            document.getElementById('giftTransactionButton').disabled = false;
        }, 300000);
        
        let countdownIntervalGift = setInterval(() => {
            let elapsed = Date.now() - giftAuthStartTime;
            let remaining = 300000 - elapsed;
            if (remaining < 0) remaining = 0;
            let minutes = Math.floor(remaining / 60000);
            let seconds = Math.floor((remaining % 60000) / 1000);
            
            document.getElementById('giftAuthTimerDisplay').innerHTML = `
                <div class="timer-circle">
                    <svg viewBox="0 0 36 36">
                        <path class="timer-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                        <path class="timer-progress" stroke-dasharray="${(remaining/300000)*100}, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                    </svg>
                    <span>${minutes}:${seconds < 10 ? '0' : ''}${seconds}</span>
                </div>
            `;
            
            if (remaining <= 0) { clearInterval(countdownIntervalGift); }
        }, 1000);
        
        checkGiftTransaction();
    });

    function startGiftCarousel() {
        document.getElementById('giftCarouselContainer').style.display = 'block';
        document.getElementById('giftCarouselContainer').classList.add('fade-in');
        document.getElementById('giftTransactionButton').disabled = true;
        
        // Создаем улучшенную карусель с анимацией и иконками
        const giftCarouselElement = document.getElementById('giftCarousel');
        giftCarouselElement.classList.add('spinning');
        
        // Быстрый цикл прокрутки подарков
        let giftIndex = 0;
        const allGifts = [...commonPool, ...rarePool];
        
        giftCarouselInterval = setInterval(() => {
            const item = allGifts[giftIndex % allGifts.length];
            giftCarouselElement.innerHTML = `
                <i class="${item.icon} ${item.rare ? 'rare-gift-icon' : ''}"></i>
                <span class="${item.rare ? 'rare-gift' : ''}">${item.gift}</span>
            `;
            giftIndex++;
            
            // Постепенно замедляем вращение
            if (giftIndex > 20 && giftIndex % 3 === 0) {
                clearInterval(giftCarouselInterval);
                giftCarouselInterval = setInterval(() => {
                    const item = allGifts[giftIndex % allGifts.length];
                    giftCarouselElement.innerHTML = `
                        <i class="${item.icon} ${item.rare ? 'rare-gift-icon' : ''}"></i>
                        <span class="${item.rare ? 'rare-gift' : ''}">${item.gift}</span>
                    `;
                    giftIndex++;
                }, 300); // Замедляем
            }
            
            // Финальное замедление
            if (giftIndex > 35 && giftIndex % 5 === 0) {
                clearInterval(giftCarouselInterval);
                giftCarouselInterval = setInterval(() => {
                    const item = allGifts[giftIndex % allGifts.length];
                    giftCarouselElement.innerHTML = `
                        <i class="${item.icon} ${item.rare ? 'rare-gift-icon' : ''}"></i>
                        <span class="${item.rare ? 'rare-gift' : ''}">${item.gift}</span>
                    `;
                    giftIndex++;
                }, 600); // Еще медленнее
            }
        }, 100);
        
        // Останавливаем карусель и показываем финальный результат
        setTimeout(() => {
            clearInterval(giftCarouselInterval);
            giftCarouselElement.classList.remove('spinning');
            
            let pool = commonPool;
            if (giftSpinCount % 20 === 0 && giftSpinCount !== 0) { // Увеличиваем шансы на редкие подарки
                pool = [...commonPool, ...rarePool];
            }
            
            let totalWeight = pool.reduce((sum, item) => sum + item.weight, 0);
            let rnd = Math.random() * totalWeight;
            let finalGift;
            
            for (let item of pool) {
                rnd -= item.weight;
                if (rnd <= 0) {
                    finalGift = item;
                    break;
                }
            }
            
            if (!finalGift) finalGift = pool[pool.length-1];
            
            // Визуальный эффект для финального подарка
            giftCarouselElement.innerHTML = `
                <div class="final-gift ${finalGift.rare ? 'rare-gift-container' : ''}">
                    <i class="${finalGift.icon} ${finalGift.rare ? 'rare-gift-icon pulse-animation' : ''}"></i>
                    <span class="${finalGift.rare ? 'rare-gift' : ''}">${finalGift.gift}</span>
                </div>
            `;
            
            // Добавляем визуальный эффект
            if (finalGift.rare) {
                launchConfetti();
                showNotification('Поздравляем! Вы получили редкий подарок!', 'success');
            } else {
                showNotification('Вы получили подарок!', 'success');
            }
            
            document.getElementById('giftResult').innerHTML = `
                <div class="gift-result ${finalGift.rare ? 'rare-gift-result' : ''}">
                    Ваш подарок: <strong>${finalGift.gift}</strong>
                    ${finalGift.rare ? '<div class="rare-badge">Редкий!</div>' : ''}
                </div>
            `;
            
            giftSpinCount++;
            document.getElementById('giftTransactionButton').disabled = false;
        }, giftSpinDuration);
    }

    /* Улучшенные потоки с визуальной обратной связью */
    document.querySelectorAll('.streamButton').forEach(button => {
        button.addEventListener('click', (e) => {
            const streamButton = e.target;
            const amount = streamButton.getAttribute('data-amount');
            const streamCard = e.target.closest('.stream-card');
            const streamId = streamCard.getAttribute('data-stream');
            
            if (!streamsStatus[streamId].paidToday) {
                // Визуальный эффект нажатия
                streamButton.classList.add('button-pressed');
                setTimeout(() => streamButton.classList.remove('button-pressed'), 300);
                
                // Имитируем отправку транзакции
                streamButton.disabled = true;
                streamButton.innerHTML = `<div class="loading-spinner small"></div> Обработка...`;
                
                // Имитируем задержку сети
                setTimeout(() => {
                    streamsStatus[streamId].paidToday = true;
                    streamsStatus[streamId].count++;
                    
                    streamCard.querySelector('.streamCount').innerText = streamsStatus[streamId].count;
                    updateStreamProgress(streamId);
                    checkRewardAvailability();
                    
                    // Восстанавливаем кнопку с эффектом успешной оплаты
                    streamButton.classList.remove('button-pressed');
                    streamButton.classList.add('button-success');
                    streamButton.innerHTML = `<i class="ri-checkbox-circle-line"></i> Оплачено`;
                    
                    // Анимируем карточку как "оплаченную"
                    streamCard.classList.add('stream-paid');
                    
                    // Показываем уведомление
                    showNotification(`Поток ${streamId} оплачен на сумму ${amount} PLEX`, 'success');
                    
                    // Возвращаем исходное состояние через некоторое время
                    setTimeout(() => {
                        streamButton.classList.remove('button-success');
                        streamButton.disabled = false;
                        streamButton.innerHTML = `Внести ${amount} PLEX`;
                    }, 3000);
                }, 1500);
            } else {
                // Показываем уведомление, что поток уже оплачен
                showNotification(`Поток ${streamId} уже оплачен сегодня`, 'info');
                
                // Визуальный эффект невозможности повторной оплаты
                streamButton.classList.add('button-disabled');
                setTimeout(() => streamButton.classList.remove('button-disabled'), 300);
            }
            
            resetIdleTimer();
        });
        
        // Добавляем всплывающие подсказки к кнопкам потоков
        const streamCard = button.closest('.stream-card');
        const streamId = streamCard.getAttribute('data-stream');
        button.setAttribute('title', `Оплатить поток ${streamId}`);
    });

    // Улучшенный обработчик для кнопки награды
    document.getElementById('rewardButton').addEventListener('click', () => {
        const rewardButton = document.getElementById('rewardButton');
        
        if (debt === 0 && allStreamsPaid()) {
            if (!rewardClaimedToday) {
                // Визуальная обратная связь
                rewardButton.classList.add('button-progress');
                rewardButton.disabled = true;
                rewardButton.innerHTML = `<div class="loading-spinner small"></div> Получение награды...`;
                
                setTimeout(() => {
                    rewardClaimedToday = true;
                    
                    const rewards = [
                        { name: 'Пылевая награда', icon: 'ri-copper-coin-line', color: '#cd7f32' },
                        { name: 'Средняя награда', icon: 'ri-coin-line', color: '#c0c0c0' },
                        { name: 'Крупная награда', icon: 'ri-vip-crown-line', color: '#ffd700' }
                    ];
                    
                    const reward = rewards[Math.floor(Math.random() * rewards.length)];
                    
                    document.getElementById('rewardDisplay').innerHTML = `
                        <div class="reward-result" style="color: ${reward.color}">
                            <i class="${reward.icon}" style="font-size: 2rem;"></i>
                            <div class="reward-name">${reward.name}</div>
                        </div>
                    `;
                    
                    // Визуальные эффекты для награды
                    launchConfetti();
                    showNotification(`Поздравляем! Вы получили ${reward.name}`, 'success');
                    
                    // Обновляем кнопку
                    rewardButton.classList.remove('button-progress');
                    rewardButton.classList.add('button-claimed');
                    rewardButton.innerHTML = `<i class="ri-checkbox-circle-line"></i> Награда получена`;
                }, 2000);
            } else {
                showNotification('Вы уже получили награду сегодня', 'info');
            }
        } else {
            if (debt > 0) {
                showNotification(`Погасите долг ${debt} PLEX для получения награды`, 'warning');
            } else {
                showNotification('Оплатите все активные потоки для получения награды', 'warning');
            }
        }
        
        resetIdleTimer();
    });

    function allStreamsPaid() {
        for (let id in streamsStatus) {
            if (streamsStatus[id].count > 0 && !streamsStatus[id].paidToday) {
                return false;
            }
        }
        return true;
    }

    function checkRewardAvailability() {
        const rewardButton = document.getElementById('rewardButton');
        if (debt === 0 && allStreamsPaid() && !rewardClaimedToday) {
            rewardButton.disabled = false;
            rewardButton.classList.add('ready-to-claim');
            rewardButton.innerHTML = '<i class="ri-gift-line"></i> Получить награду';
        } else {
            rewardButton.disabled = true;
            rewardButton.classList.remove('ready-to-claim');
            if (rewardClaimedToday) {
                rewardButton.innerHTML = '<i class="ri-checkbox-circle-line"></i> Награда получена';
            } else {
                rewardButton.innerHTML = '<i class="ri-lock-line"></i> Получить награду';
            }
        }
    }

    function updateStreamProgress(streamId) {
        const streamCard = document.querySelector(`.stream-card[data-stream="${streamId}"]`);
        if (streamCard) {
            const progressBar = streamCard.querySelector('.progress-bar');
            const streak = streamsStatus[streamId].count;
            const percentage = Math.min((streak / 10) * 100, 100);
            
            // Анимируем прогресс-бар
            progressBar.style.transition = "width 1.5s cubic-bezier(0.65, 0, 0.35, 1)";
            progressBar.style.width = percentage + "%";
            
            // Добавляем эффект при достижении 100%
            if (percentage >= 100) {
                setTimeout(() => {
                    progressBar.classList.add('completed');
                    showNotification(`Поздравляем! Поток ${streamId} завершен!`, 'success');
                }, 1500);
            }
        }
    }

    function updateDebtIndicator() {
        const debtIndicator = document.getElementById('debtIndicator');
        debtIndicator.innerText = 'Долг: ' + debt + ' PLEX';
        
        // Анимированный переход цвета
        if (debt === 0) {
            debtIndicator.classList.remove('debt-warning', 'debt-danger');
            debtIndicator.classList.add('debt-success');
        } else if (debt <= 500) {
            debtIndicator.classList.remove('debt-success', 'debt-danger');
            debtIndicator.classList.add('debt-warning');
        } else {
            debtIndicator.classList.remove('debt-success', 'debt-warning');
            debtIndicator.classList.add('debt-danger');
        }
    }

    // Улучшенный эффект конфетти
    function launchConfetti() {
        const confettiContainer = document.createElement('div');
        confettiContainer.className = 'confetti-container';
        
        // Создаем больше частиц разного размера и цвета
        const colors = ['#00E2C3', '#FF3B9A', '#2D7FF9', '#9C5FFF', '#4CD964', '#FFCC00'];
        for (let i = 0; i < 100; i++) {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            
            // Случайный цвет
            const color = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.backgroundColor = color;
            
            // Случайное положение и размер
            confetti.style.left = Math.random() * 100 + '%';
            confetti.style.width = Math.random() * 10 + 4 + 'px';
            confetti.style.height = confetti.style.width;
            
            // Случайная анимация и задержка
            const delay = Math.random() * 2;
            const rotation = Math.random() * 360;
            confetti.style.animationDelay = delay + 's';
            confetti.style.transform = `rotate(${rotation}deg)`;
            
            confettiContainer.appendChild(confetti);
        }
        document.body.appendChild(confettiContainer);
        
        // Убираем контейнер
        setTimeout(() => {
            confettiContainer.classList.add('fade-out');
            setTimeout(() => confettiContainer.remove(), 1000);
        }, 5000);
    }

    document.addEventListener('mousemove', resetIdleTimer);
    document.addEventListener('keydown', resetIdleTimer);
    document.addEventListener('click', resetIdleTimer);
    document.addEventListener('touchstart', resetIdleTimer);
    document.addEventListener('scroll', resetIdleTimer);

    /* Улучшенный интерфейс для тестового уровня */
    let testLevelTxs = [];
    let testLevelProgress = 0;
    let testLevelInterval = null;
    let lastRequestTime = 0;
    const testLevelStatusEl = document.getElementById('testLevelStatus');
    const testLevelTxList = document.getElementById('testLevelTxList');
    const testLevelProgressBar = document.getElementById('testLevelProgressBar');

    document.getElementById('startTestLevelBtn').addEventListener('click', () => {
        const startButton = document.getElementById('startTestLevelBtn');
        
        if (testLevelInterval) {
            // Остановка мониторинга
            clearInterval(testLevelInterval);
            testLevelInterval = null;
            testLevelStatusEl.innerHTML = `<i class="ri-stop-circle-line"></i> Мониторинг остановлен`;
            startButton.innerHTML = `<i class="ri-play-circle-line"></i> Начать мониторинг`;
            startButton.classList.remove('monitoring-active');
            showNotification('Мониторинг транзакций остановлен', 'info');
            return;
        }
        
        // Запуск мониторинга
        testLevelStatusEl.innerHTML = `<i class="ri-loader-4-line spin"></i> Запуск мониторинга...`;
        startButton.innerHTML = `<i class="ri-stop-circle-line"></i> Остановить мониторинг`;
        startButton.classList.add('monitoring-active');
        showNotification('Мониторинг транзакций запущен', 'success');
        
        // Используем action=txlist для мониторинга нативных транзакций (BNB)
        testLevelInterval = setInterval(requestTestLevelTxs, 8000);
        requestTestLevelTxs(); // Сразу делаем первый запрос
    });

    function requestTestLevelTxs() {
        const now = Date.now();
        if (now - lastRequestTime < 5000) {
            testLevelStatusEl.innerHTML = `<i class="ri-time-line"></i> Ожидание запроса... ${Math.ceil((5000 - (now - lastRequestTime)) / 1000)}с`;
            return;
        }
        
        lastRequestTime = now;
        testLevelStatusEl.innerHTML = `<i class="ri-loader-4-line spin"></i> Запрос к BscScan...`;
        
        const apiKey = "ARA9FYMNCIZHTB2PPBSWF686GID9F99P41";
        const url = `https://api.bscscan.com/api?module=account&action=txlist&address=${systemWallet}&startblock=0&endblock=99999999&sort=desc&apikey=${apiKey}`;
        
        fetch(url)
            .then(res => {
                if (!res.ok) {
                    throw new Error('Ошибка сети');
                }
                return res.json();
            })
            .then(data => {
                if(data.status === "1" && Array.isArray(data.result)) {
                    const timestamp = new Date().toLocaleTimeString();
                    testLevelStatusEl.innerHTML = `<i class="ri-check-double-line"></i> Обновлено ${timestamp}`;
                    updateTestLevelData(data.result);
                } else {
                    testLevelStatusEl.innerHTML = `<i class="ri-error-warning-line"></i> Нет данных по кошельку`;
                }
            })
            .catch(err => {
                console.error(err);
                testLevelStatusEl.innerHTML = `<i class="ri-wifi-off-line"></i> Ошибка сети при запросе`;
            });
    }

    function updateTestLevelData(txArray) {
        let newFound = false;
        let newTransactions = [];
        
        for (let tx of txArray) {
            if (!isValidAddress(tx.from) || !isValidAddress(tx.to)) continue;
            
            // Фильтруем транзакции по BNB с системного кошелька на кошелек пользователя
            if (
                tx.from.toLowerCase() === systemWallet.toLowerCase() &&
                tx.to.toLowerCase() === userWallet.toLowerCase() &&
                parseFloat(tx.value) > 0
            ) {
                if (!testLevelTxs.find(t => t.hash === tx.hash)) {
                    testLevelTxs.push(tx);
                    newTransactions.push(tx);
                    newFound = true;
                }
            }
        }
        
        if (newFound) {
            // Сортируем транзакции по времени
            testLevelTxs.sort((a, b) => b.timeStamp - a.timeStamp);
            
            // Увеличиваем прогресс и показываем уведомление
            const newProgress = Math.min(testLevelProgress + 10 * newTransactions.length, 100);
            
            // Анимируем увеличение прогресса
            animateProgress(testLevelProgress, newProgress);
            testLevelProgress = newProgress;
            
            // Показываем уведомление о новых транзакциях
            newTransactions.forEach(tx => {
                const amount = (parseFloat(tx.value) / (10**18)).toFixed(4);
                showNotification(`Новая транзакция: ${amount} BNB`, 'success');
            });
        }
        
        updateTestLevelUI();
    }

    function animateProgress(start, end) {
        const duration = 1500;
        const startTime = performance.now();
        
        function animate(currentTime) {
            const elapsedTime = currentTime - startTime;
            const progress = Math.min(elapsedTime / duration, 1);
            const currentProgress = start + (end - start) * progress;
            
            testLevelProgressBar.style.width = currentProgress + "%";
            
            if (progress < 1) {
                requestAnimationFrame(animate);
            } else {
                testLevelProgressBar.style.width = end + "%";
                
                // Если достигли 100%, показываем "Уровень пройден"
                if (end >= 100) {
                    testLevelStatusEl.innerHTML = `<i class="ri-trophy-line"></i> <span class="success-text">Тестовый уровень пройден!</span>`;
                    showNotification('Поздравляем! Тестовый уровень пройден!', 'success');
                    launchConfetti();
                }
            }
        }
        
        requestAnimationFrame(animate);
    }

    function updateTestLevelUI() {
        testLevelTxList.innerHTML = "";
        
        if (testLevelTxs.length === 0) {
            testLevelTxList.innerHTML = `
                <div class="empty-tx-list">
                    <i class="ri-inbox-line"></i>
                    <p>Транзакций пока нет</p>
                </div>
            `;
            return;
        }
        
        // Создаем и добавляем элементы транзакций с анимацией
        testLevelTxs.forEach((tx, index) => {
            const div = document.createElement('div');
            div.className = "tx-item";
            
            const time = new Date(tx.timeStamp * 1000).toLocaleString();
            const amount = (Number(tx.value)/(10**18)).toFixed(4);
            
            div.innerHTML = `
                <div class="tx-header">
                    <div class="tx-hash">
                        <strong>Tx:</strong> 
                        <a href="https://bscscan.com/tx/${tx.hash}" target="_blank" title="Просмотреть на BscScan">
                            ${tx.hash.substring(0, 10)}...${tx.hash.substring(tx.hash.length - 4)}
                            <i class="ri-external-link-line"></i>
                        </a>
                    </div>
                    <div class="tx-time" title="${time}">${time}</div>
                </div>
                <div class="tx-amount">
                    <div class="amount-value">${amount} <span class="token-symbol">BNB</span></div>
                    <div class="tx-status ${tx.confirmations > 10 ? 'confirmed' : 'pending'}">
                        ${tx.confirmations > 10 ? '<i class="ri-check-double-line"></i> Подтверждено' : '<i class="ri-loader-4-line spin"></i> В обработке'}
                    </div>
                </div>
            `;
            
            // Добавляем с эффектом задержки для плавности
            setTimeout(() => {
                testLevelTxList.appendChild(div);
                div.classList.add('fade-in');
            }, index * 150);
        });
    }

    // Инициализация при загрузке страницы
    window.addEventListener('DOMContentLoaded', () => {
        // Добавляем дополнительные стили для новых элементов
        const styleElement = document.createElement('style');
        styleElement.textContent = `
            /* Стили для уведомлений */
            .notification {
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: var(--bg-card);
                color: var(--text-primary);
                border-radius: var(--border-radius-lg);
                padding: 12px 16px;
                display: flex;
                align-items: center;
                max-width: 350px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
                z-index: 9999;
                transform: translateY(100px);
                opacity: 0;
                transition: transform 0.3s, opacity 0.3s;
            }
            .notification.show { transform: translateY(0); opacity: 1; }
            .notification.success { border-left: 4px solid var(--accent-green); }
            .notification.error { border-left: 4px solid var(--accent-red); }
            .notification.warning { border-left: 4px solid var(--accent-yellow); }
            .notification.info { border-left: 4px solid var(--accent-blue); }
            .notification-icon { margin-right: 12px; font-size: 1.2rem; }
            .notification-message { font-size: 0.9rem; }

            /* Стили для индикаторов загрузки */
            .loading-spinner {
                display: inline-block;
                width: 24px;
                height: 24px;
                border: 3px solid rgba(255, 255, 255, 0.3);
                border-radius: 50%;
                border-top-color: var(--accent-blue);
                animation: spinner 1s ease-in-out infinite;
            }
            .loading-spinner.small {
                width: 16px;
                height: 16px;
                border-width: 2px;
                margin-right: 8px;
            }
            @keyframes spinner {
                to { transform: rotate(360deg); }
            }

            /* Стили для таймера */
            .timer-circle {
                position: relative;
                width: 64px;
                height: 64px;
                margin: 0 auto 12px;
            }
            .timer-circle svg {
                transform: rotate(-90deg);
                width: 100%;
                height: 100%;
            }
            .timer-circle path {
                fill: none;
                stroke-width: 3;
                stroke-linecap: round;
            }
            .timer-bg { stroke: rgba(255,255,255,0.1); }
            .timer-progress { 
                stroke: var(--accent-blue);
                transition: stroke-dasharray 0.5s ease-in-out;
            }
            .timer-circle span {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 0.9rem;
                font-weight: 600;
            }

            /* Стили для кнопок */
            button.action-button, button.recheck-button {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
                transition: transform 0.2s, box-shadow 0.2s, background 0.3s;
            }
            button.action-button:active,
            button.recheck-button:active,
            .button-pressed {
                transform: translateY(2px) scale(0.98) !important;
            }
            .button-disabled { opacity: 0.7; cursor: not-allowed !important; }
            .button-success { background: var(--accent-green) !important; }
            .button-progress { background: var(--accent-blue) !important; }
            .button-claimed { background: var(--accent-purple) !important; }
            .ready-to-claim {
                animation: pulse-button 2s infinite;
            }
            @keyframes pulse-button {
                0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(76, 217, 100, 0.7); }
                50% { transform: scale(1.03); box-shadow: 0 0 0 10px rgba(76, 217, 100, 0); }
                100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(76, 217, 100, 0); }
            }

            /* Стили для сообщений о статусе */
            .success-message { color: var(--accent-green); display: flex; align-items: center; gap: 8px; }
            .error-message { color: var(--accent-red); display: flex; align-items: center; gap: 8px; }
            .pending-message { color: var(--accent-yellow); display: flex; align-items: center; gap: 8px; }
            .error-with-icon { display: flex; align-items: center; gap: 8px; color: var(--accent-red); }

            /* Стили для адресов кошельков */
            .system-wallet-container {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
                background: rgba(255,255,255,0.05);
                padding: 8px;
                border-radius: 8px;
                margin: 12px 0;
            }
            .copy-button {
                background: none;
                border: none;
                color: var(--text-secondary);
                cursor: pointer;
                font-size: 1.1rem;
                padding: 4px;
                border-radius: 4px;
                transition: all 0.3s;
            }
            .copy-button:hover {
                background: rgba(255,255,255,0.1);
                color: var(--text-primary);
            }
            
            /* Стили для QR-кода */
            .qr-code-container {
                margin: 16px auto;
                background: #fff;
                padding: 8px;
                border-radius: 8px;
                width: fit-content;
            }

            /* Стили для карусели подарков */
            .spinning {
                animation: spinning 0.5s infinite linear;
            }
            @keyframes spinning {
                0% { transform: translateY(0); }
                50% { transform: translateY(-5px); }
                100% { transform: translateY(0); }
            }
            .final-gift {
                padding: 16px;
                border-radius: var(--border-radius-lg);
                background: rgba(255,255,255,0.05);
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 8px;
                transition: all 0.5s;
            }
            .rare-gift-container {
                background: linear-gradient(45deg, rgba(255,59,154,0.3), rgba(156,95,255,0.3));
                animation: glow 2s infinite;
            }
            .rare-gift {
                color: var(--accent-magenta);
                font-weight: 700;
                text-shadow: 0 0 10px rgba(255,59,154,0.5);
            }
            .rare-gift-icon {
                color: var(--accent-purple);
                font-size: 2rem !important;
            }
            @keyframes glow {
                0%, 100% { box-shadow: 0 0 10px rgba(156,95,255,0.5); }
                50% { box-shadow: 0 0 20px rgba(255,59,154,0.8); }
            }
            .gift-result {
                padding: 12px;
                border-radius: var(--border-radius-lg);
                background: rgba(255,255,255,0.05);
                margin-top: 16px;
            }
            .rare-gift-result {
                background: linear-gradient(45deg, rgba(255,59,154,0.2), rgba(156,95,255,0.2));
            }
            .rare-badge {
                display: inline-block;
                background: var(--accent-magenta);
                color: white;
                border-radius: 12px;
                padding: 2px 8px;
                font-size: 0.8rem;
                margin-top: 8px;
            }

            /* Стили для оплаченных потоков */
            .stream-paid {
                box-shadow: 0 0 0 2px var(--accent-green);
                animation: highlight-paid 2s;
            }
            @keyframes highlight-paid {
                0%, 100% { box-shadow: 0 0 0 2px var(--accent-green); }
                50% { box-shadow: 0 0 0 4px var(--accent-green); }
            }
            .progress-bar.completed {
                background: linear-gradient(45deg, var(--accent-green), var(--accent-turquoise)) !important;
                box-shadow: 0 0 10px rgba(76, 217, 100, 0.5);
            }

            /* Стили для долгов */
            .debt-success { color: var(--accent-green) !important; }
            .debt-warning { color: var(--accent-yellow) !important; }
            .debt-danger { color: var(--accent-red) !important; }

            /* Улучшенный эффект конфетти */
            .confetti-container {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: 9990;
                pointer-events: none;
                overflow: hidden;
            }
            .confetti {
                position: absolute;
                top: -10px;
                border-radius: 0;
                width: 8px;
                height: 8px;
                animation: confetti-fall 5s linear forwards;
            }
            @keyframes confetti-fall {
                0% {
                    transform: translateY(-10px) rotate(0deg);
                    opacity: 1;
                }
                70% {
                    opacity: 1;
                }
                100% {
                    transform: translateY(calc(100vh + 10px)) rotate(720deg);
                    opacity: 0;
                }
            }

            /* Стили для мониторинга BNB */
            #test-level-section {
                transition: transform 0.3s, box-shadow 0.3s;
            }
            #test-level-section:hover {
                transform: translateY(-3px);
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            }
            #startTestLevelBtn {
                display: flex;
                align-items: center;
                gap: 6px;
            }
            .monitoring-active {
                background: var(--accent-red) !important;
            }
            .empty-tx-list {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                padding: 32px;
                color: var(--text-tertiary);
                gap: 12px;
            }
            .empty-tx-list i { font-size: 2rem; }
            .tx-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 8px;
            }
            .tx-amount {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            .amount-value {
                font-weight: 600;
                color: var(--accent-green);
            }
            .token-symbol { opacity: 0.7; }
            .tx-status {
                display: flex;
                align-items: center;
                gap: 6px;
                font-size: 0.8rem;
            }
            .tx-status.confirmed { color: var(--accent-green); }
            .tx-status.pending { color: var(--accent-yellow); }
            .spin {
                animation: spin 1.5s linear infinite;
            }
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            .success-text { color: var(--accent-green); }

            /* Анимации для улучшения UX */
            .shake-animation {
                animation: shake 0.5s;
            }
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                20%, 40%, 60%, 80% { transform: translateX(5px); }
            }
            .pulse-animation {
                animation: pulse 1.5s infinite;
            }
            @keyframes pulse {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.05); }
            }
        `;
        document.head.appendChild(styleElement);
        
        // Запускаем таймер бездействия
        resetIdleTimer();
        
        // Проверяем возможность получения награды
        checkRewardAvailability();
    });
</script>

<!-- Подключаем QR-код библиотеку для мобильного UX -->
<script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>

  <!-- Скрипт кастомного курсора -->
  <script>
    const cursorDot = document.querySelector('.cursor-dot');
    const cursorRing = document.querySelector('.cursor-ring');
    let mouseX = 0, mouseY = 0, dotX = 0, dotY = 0, ringX = 0, ringY = 0;
    const smoothFactor = 0.2, ringSmooth = 0.15;
    document.addEventListener('mousemove', (e) => { mouseX = e.clientX; mouseY = e.clientY; });
    document.addEventListener('mousedown', () => { cursorDot.classList.add('cursor-active'); cursorRing.classList.add('cursor-ring-active'); });
    document.addEventListener('mouseup', () => { cursorDot.classList.remove('cursor-active'); cursorRing.classList.remove('cursor-ring-active'); });
    document.addEventListener('mouseover', (e) => { if (e.target.closest('a, button, input, .action-button')) { cursorDot.classList.add('cursor-hover'); cursorRing.classList.add('cursor-ring-hover'); } });
    document.addEventListener('mouseout', (e) => { if (e.target.closest('a, button, input, .action-button')) { cursorDot.classList.remove('cursor-hover'); cursorRing.classList.remove('cursor-ring-hover'); } });
    function animateCursor() {
      dotX += (mouseX - dotX) * smoothFactor;
      dotY += (mouseY - dotY) * smoothFactor;
      ringX += (mouseX - ringX) * ringSmooth;
      ringY += (mouseY - ringY) * ringSmooth;
      cursorDot.style.transform = `translate(${dotX}px, ${dotY}px)`;
      cursorRing.style.transform = `translate(${ringX}px, ${ringY}px)`;
      requestAnimationFrame(animateCursor);
    }
    animateCursor();
  </script>
</body>
</html>
